import{m as _,r as d,T as h,i as O,g as b,o as i,a as t,t as o,u as l,c as r,k as T,F as D,e as F,f as x,h as v,n as k,K as C}from"./app-a39c937f.js";import Y from"./App-6bb12c29.js";import{_ as $}from"./Modal-df1e3aae.js";import{P as W}from"./Pagination-10a3ee54.js";import"./App-dead54de.js";import"./Sidebar-8911f1a5.js";import"./Menu-ed0b9fc4.js";import"./ProfileModal-61a09d92.js";import"./FormInput-4b7fa008.js";import"./FormPhoneInput-1c9c9926.js";/* empty css                      */import"./FormSelect-c7672027.js";import"./index-8758cb17.js";import"./hidden-695af094.js";import"./use-text-value-d1d229e7.js";import"./transition-37a067aa.js";import"./micro-task-89dcd6af.js";import"./tabs-86fdd039.js";import"./LangToggle-edfcdcaa.js";import"./MobileSidebar-d784e66f.js";import"./index-80d9f634.js";/* empty css              */import"./Sidebar-69e6d10e.js";import"./_plugin-vue_export-helper-c27b6911.js";const q={class:"text-xl mb-6"},K={class:"bg-white border px-2 py-2 rounded-md mb-8"},P={class:"text-sm mb-2"},R={class:"text-sm"},z={class:"text-sm flex items-center gap-x-4 mb-2"},E=["disabled"],I={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},G={key:1},H={key:0,class:"mb-8"},J={class:"flex items-center text-sm"},Q={class:"ml-1 mt-1"},X={key:1},tt={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2 mb-6"},et={class:"flex items-center gap-x-2"},st={key:2,class:"flex items-center text-sm mb-4"},ot={class:"ml-1 mt-1"},it={key:3,class:"grid grid-cols-2 gap-x-4 gap-y-1"},nt={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2"},rt={class:"flex items-center gap-x-2"},lt=["src","alt"],at=["onClick"],dt={class:"grid grid-cols-1 gap-x-6 gap-y-4"},pt={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},ut={class:"flex items-center gap-x-3"},mt=["src"],ct={class:"text-[16px]"},ft={class:"text-[17px] text-gray-800 mb-2"},vt={class:"text-sm"},gt={class:"mt-3 border-t pt-5 flex"},ht=["disabled"],bt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},xt={key:1},wt={class:"grid grid-cols-1 gap-x-6 gap-y-4"},yt={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},_t={class:"flex items-center gap-x-3"},kt={class:"text-[16px]"},Ct={class:"text-sm"},$t={class:"mt-3 border-t pt-5 flex"},At=["disabled"],Zt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Mt={key:1},te={__name:"Updates",props:{config:{type:Object,required:!0},rows:{type:Array,required:!0}},setup(p){const A=p,Z=_(()=>C().props.applicationVersion),M=_(()=>C().props.applicationReleaseDate),w=d(null),y=d(null),S=d(null),B=d(!1),u=d(!1),m=d(!1),c=s=>{const e=A.config.find(n=>n.key===s);return e?e.value:""},a=h({uuid:null,purchase_code:null,addon:null}),f=h({update:!0}),g=h({checkUpdate:!0}),V=()=>{u.value=!0},j=s=>{w.value=s.logo,y.value=s.name,S.value=s.description,a.uuid=s.uuid,a.addon=s.name,m.value=!0},U=()=>{a.post("/admin/addons/update",{preserveScroll:!0,onSuccess:()=>{m.value=!1}})},N=()=>{f.post("/admin/update",{preserveScroll:!0,onSuccess:()=>{u.value=!1}})},L=()=>{g.get("/admin/updates/check",{preserveScroll:!0,onSuccess:()=>{B.value=!1}})};return(s,e)=>(i(),O(Y,null,{default:b(()=>[t("div",null,[t("h2",q,o(s.$t("Swiftchats Updates")),1),t("div",K,[t("div",P,"Current Version: v"+o(Z.value),1),t("div",R,"Released Date: "+o(M.value),1)]),t("div",z,[t("span",null,"Last checked on "+o(c("last_update_check")),1),t("button",{onClick:e[0]||(e[0]=n=>L()),disabled:l(g).processing,class:"border px-2 py-1 text-sm rounded-md bg-primary text-white"},[l(g).processing?(i(),r("svg",I,e[6]||(e[6]=[t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)]))):(i(),r("span",G,"Check Again"))],8,E)]),c("is_update_available")==0?(i(),r("div",H,[t("p",J,[e[7]||(e[7]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),t("span",Q,o(s.$t("You have installed the latest version of Swiftchats")),1)])])):(i(),r("div",X,[e[9]||(e[9]=t("div",{class:"flex items-center gap-x-1 text-sm bg-orange-100 py-3 px-2 rounded-md mb-4"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})]),t("span",null,[t("b",null,"Important:"),T(" Before updating backup your database and files")])],-1)),t("div",tt,[t("div",et,[e[8]||(e[8]=t("img",{class:"h-5 w-full",src:"/images/logo.png",alt:"Swiftchats Logo"},null,-1)),t("span",null,"v"+o(c("available_version")),1)]),t("button",{onClick:e[1]||(e[1]=n=>V()),class:"border rounded-md px-4 py-1"},o(s.$t("Update to version")+" "+c("available_version")),1)])])),e[11]||(e[11]=t("h2",{class:"text-xl mb-2"},"Addons",-1)),p.rows.data.length==0?(i(),r("p",st,[e[10]||(e[10]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),t("span",ot,o(s.$t("Your addons are all upto date.")),1)])):(i(),r("div",it,[(i(!0),r(D,null,F(p.rows.data,n=>(i(),r("div",nt,[t("div",rt,[t("img",{class:"h-8 w-8",src:"/images/"+n.logo,alt:n.name},null,8,lt),t("span",null,o(n.name),1)]),t("button",{onClick:St=>j(n),class:"border rounded-md px-4 py-1"},"Update",8,at)]))),256))])),x(W,{class:"mt-3",pagination:p.rows.meta},null,8,["pagination"])]),x($,{isOpen:m.value},{default:b(()=>[t("div",dt,[t("div",pt,[t("div",ut,[t("div",null,[t("img",{class:"h-8 w-8",src:"/images/"+w.value,alt:"Whatsapp Logo"},null,8,mt)]),t("div",ct,o(s.$t(y.value)),1)])]),t("form",{onSubmit:e[3]||(e[3]=v(n=>U(),["prevent"]))},[t("div",null,[t("div",ft,o(s.$t("Update module")),1),t("h4",vt,o(s.$t("A new version is available. Would you like to proceed with updating the module?")),1)]),t("div",gt,[t("button",{type:"button",onClick:e[2]||(e[2]=v(n=>m.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},o(s.$t("No, not now")),1),t("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":l(a).processing}]),disabled:l(a).processing},[l(a).processing?(i(),r("svg",bt,e[12]||(e[12]=[t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)]))):(i(),r("span",xt,o(s.$t("Yes, run the update")),1))],10,ht)])],32)])]),_:1},8,["isOpen"]),x($,{isOpen:u.value},{default:b(()=>[t("div",wt,[t("div",yt,[t("div",_t,[t("div",kt,o(s.$t("Update to the latest version")),1)])]),t("form",{onSubmit:e[5]||(e[5]=v(n=>N(),["prevent"]))},[t("div",null,[t("h4",Ct,o(s.$t("Would you like to proceed with updating Swiftchats?")),1)]),t("div",$t,[t("button",{type:"button",onClick:e[4]||(e[4]=v(n=>u.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},o(s.$t("No, not now")),1),t("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":l(f).processing}]),disabled:l(f).processing},[l(f).processing?(i(),r("svg",Zt,e[13]||(e[13]=[t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)]))):(i(),r("span",Mt,o(s.$t("Yes, run the update")),1))],10,At)])],32)])]),_:1},8,["isOpen"])]),_:1}))}};export{te as default};
