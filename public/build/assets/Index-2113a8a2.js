import{r as _,T as Y,q,O as G,c as o,a as e,t as s,e as h,f as p,u as r,b as a,F as z,j as W,o as n,k as d,l as b,h as y,n as g,d as J,g as O}from"./app-43851608.js";import{P as K,E as Q,_ as X}from"./App-26099fac.js";import{_ as ee}from"./BillingTable-36180a35.js";import{_ as se}from"./Modal-22a49fae.js";import{_ as te}from"./FormInput-4a309017.js";import"./Sidebar-13bbdf6e.js";import"./Menu-7a7609fd.js";import"./ProfileModal-628e5b7c.js";import"./LangToggle-8d05b0dc.js";import"./index-99011d5f.js";import"./MobileSidebar-64958b6d.js";/* empty css              */import"./debounce-729b203d.js";import"./_baseGetTag-2e10a2d1.js";import"./Table-69702a89.js";import"./Pagination-8172d90a.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TableHeaderRowItem-459897e8.js";import"./TableBodyRowItem-110be769.js";const ie={key:0,class:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50"},ne={class:"bg-white p-6 rounded-lg shadow-lg text-center text-sm"},oe=W('<div class="flex justify-center mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24"><path fill="black" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="matrix(0 0 0 0 12 12)"><animateTransform id="svgSpinnersPulseRingsMultiple0" attributeName="transform" begin="0;svgSpinnersPulseRingsMultiple2.end" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="translate" values="12 12;0 0"></animateTransform><animateTransform additive="sum" attributeName="transform" begin="0;svgSpinnersPulseRingsMultiple2.end" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="scale" values="0;1"></animateTransform><animate attributeName="opacity" begin="0;svgSpinnersPulseRingsMultiple2.end" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" values="1;0"></animate></path><path fill="black" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="matrix(0 0 0 0 12 12)"><animateTransform id="svgSpinnersPulseRingsMultiple1" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.2s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="translate" values="12 12;0 0"></animateTransform><animateTransform additive="sum" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.2s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="scale" values="0;1"></animateTransform><animate attributeName="opacity" begin="svgSpinnersPulseRingsMultiple0.begin+0.2s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" values="1;0"></animate></path><path fill="black" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z" transform="matrix(0 0 0 0 12 12)"><animateTransform id="svgSpinnersPulseRingsMultiple2" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.4s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="translate" values="12 12;0 0"></animateTransform><animateTransform additive="sum" attributeName="transform" begin="svgSpinnersPulseRingsMultiple0.begin+0.4s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" type="scale" values="0;1"></animateTransform><animate attributeName="opacity" begin="svgSpinnersPulseRingsMultiple0.begin+0.4s" calcMode="spline" dur="1.2s" keySplines=".52,.6,.25,.99" values="1;0"></animate></path></svg></div>',1),ae={class:"bg-white md:bg-inherit pt-0 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] overflow-y-scroll"},le={class:"flex justify-between mt-8 md:mt-0"},re={class:"text-xl mb-1"},ce={class:"mb-6 flex items-center text-sm leading-6 text-gray-600"},ue=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1),de={class:"ml-1 mt-1"},pe={key:0,class:"bg-red-500 p-5 w-100 mb-4 rounded-[0.5rem] flex justify-between items-center space-x-4 text-white"},me={class:"flex items-center space-x-4"},he=e("span",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 56 56"},[e("path",{fill:"currentColor",d:"M9.965 50.207h36.07c3.985 0 6.469-2.86 6.469-6.469c0-1.078-.281-2.18-.867-3.187L33.567 9.074c-1.22-2.133-3.352-3.281-5.555-3.281c-2.18 0-4.336 1.148-5.579 3.281l-18.07 31.5a6.253 6.253 0 0 0-.867 3.164c0 3.61 2.508 6.469 6.469 6.469m.047-3.68c-1.641 0-2.72-1.336-2.72-2.789c0-.422.071-.914.306-1.406l18.046-31.477c.516-.89 1.454-1.312 2.368-1.312c.914 0 1.804.398 2.32 1.312l18.047 31.5c.234.47.351.961.351 1.383c0 1.453-1.125 2.79-2.742 2.79Zm18-12.117c1.125 0 1.78-.656 1.804-1.875l.328-12.351c.024-1.196-.914-2.086-2.156-2.086c-1.265 0-2.156.867-2.133 2.062l.305 12.375c.023 1.196.68 1.875 1.852 1.875m0 7.617c1.359 0 2.53-1.078 2.53-2.437c0-1.383-1.148-2.438-2.53-2.438c-1.383 0-2.532 1.078-2.532 2.438c0 1.336 1.172 2.437 2.532 2.437"})])],-1),be={key:0,class:"text-sm"},ge=e("br",null,null,-1),fe={key:1,class:"text-sm"},ve=e("br",null,null,-1),_e={class:"float-right"},ye={class:"md:flex bg-slate-100 md:bg-white shadow-sm p-5 rounded-[0.5rem] space-y-6"},xe={class:"md:w-[50%]"},we={class:"mb-5"},ke={class:"text-sm text-gray-500 tracking-[0px]"},$e={key:0,class:"text-[18px]"},Me={key:1,class:"text-[18px]"},Se={key:0,class:"flex gap-x-3"},Pe={class:"text-sm text-gray-500 tracking-[0px]"},Ce={class:"text-sm"},Ae={class:"text-sm text-gray-500 tracking-[0px]"},Te={class:"text-sm"},Ne={class:"text-sm text-gray-500 tracking-[0px]"},Ze={class:"text-sm"},Be={key:1,class:"flex space-x-6"},Ve={class:"text-sm text-gray-500 tracking-[0px]"},Re={class:"text-sm"},je={class:"md:w-[50%]"},Ee={class:"bg-slate-100 md:bg-gray-50 p-5 md:px-0 rounded-[0.5rem] mt-10 w-full"},Ie={class:"w-full"},Le={class:"mb-5"},ze={class:"text-xl tracking-[0px]"},Oe={class:"mb-6 flex items-center text-sm leading-6 text-gray-600"},De={class:"ml-1 mt-1"},Fe={class:"w-100"},He={class:"text-2xl mb-4"},Ue={class:"text-sm"},Ye={class:"text-sm mt-4 mb-2"},qe={class:"grid grid-cols-2 gap-2"},Ge={class:"flex items-center"},We=["onClick"],Je={key:0,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ke=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1),Qe=[Ke],Xe=["onClick"],es={class:"form-error text-[#b91c1c] text-xs mt-2"},ss={class:"mt-6 flex"},ts=["disabled"],is={key:0,class:"flex space-x-1"},ns=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"}),e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})])],-1),os={key:1,class:"flex space-x-1"},as=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 13a1.49 1.49 0 0 0-1 2.61V17a1 1 0 0 0 2 0v-1.39A1.49 1.49 0 0 0 12 13m5-4V7A5 5 0 0 0 7 7v2a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-7a3 3 0 0 0-3-3M9 7a3 3 0 0 1 6 0v2H9Zm9 12a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1Z"})],-1),Ss={__name:"Index",props:["subscription","rows","filters","subscriptionIsActive","subscriptionDetails","methods","isPaymentLoading","pusherSettings","organizationId","setting"],setup(f){const i=f;_(i.subscription.data);const v=_(!1),m=_(!1),c=Y({amount:null,method:null}),x=t=>{c.method=t};function w(){v.value=!0}function D(){v.value=!1}const F=async()=>{m.value=!0,c.post("/pay",{preserveScroll:!0,onFinish:()=>{m.value=!1}})};return q(()=>{i.pusherSettings.pusher_app_key!=null&&i.pusherSettings.pusher_app_cluster!=null&&(window.Pusher=K,window.Echo=new Q({broadcaster:"pusher",key:i.pusherSettings.pusher_app_key,cluster:i.pusherSettings.pusher_app_cluster,encrypted:!0}),window.Echo.channel("payments.ch"+i.organizationId).listen("NewPaymentEvent",t=>{G.visit("/billing",{})}))}),(t,u)=>(n(),o(z,null,[f.isPaymentLoading?(n(),o("div",ie,[e("div",ne,[oe,e("p",null,s(t.$t("Please wait as the payment is being processed!")),1),h(r(b),{href:"billing",class:"underline"},{default:p(()=>[d(s(t.$t("Go to billing")),1)]),_:1})])])):a("",!0),h(X,null,{default:p(()=>{var k,$,M,S,P,C,A,T,N,Z,B,V,R,j,E,I,L;return[e("div",ae,[e("div",le,[e("div",null,[e("h2",re,s(t.$t("Billing and subscription")),1),e("p",ce,[ue,e("span",de,s(t.$t("View and manage your billing history")),1)])])]),f.subscriptionIsActive?a("",!0):(n(),o("div",pe,[e("div",me,[he,((k=i.subscription)==null?void 0:k.status)==="trial"?(n(),o("h2",be,[d(s(t.$t("Your trial period is over"))+" ",1),ge,d(" "+s(t.$t("Please subscribe to a plan to continue using the app"))+".",1)])):a("",!0),(($=i.subscription)==null?void 0:$.status)==="active"?(n(),o("h2",fe,[d(s(t.$t("We were unable to autorenew your subscription"))+" ",1),ve,d(" "+s(t.$t("To continue using the app, please make a payment of"))+" "+s((M=i.subscriptionDetails)==null?void 0:M.accountBalance)+".",1)])):a("",!0)]),e("div",null,[e("div",_e,[((S=i.subscription)==null?void 0:S.status)==="trial"?(n(),y(r(b),{key:0,href:"/subscription",type:"button",class:"rounded-md bg-white text-gray-600 px-3 py-2 text-sm shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:p(()=>[d(s(t.$t("Subscribe")),1)]),_:1})):a("",!0),((P=i.subscription)==null?void 0:P.status)==="active"&&i.setting.enable_custom_payment==1?(n(),o("button",{key:1,onClick:u[0]||(u[0]=l=>w()),type:"button",class:"rounded-md bg-white text-gray-600 px-3 py-2 text-sm shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},s(t.$t("Add payment")),1)):a("",!0)])])])),e("div",ye,[e("div",xe,[e("div",we,[e("h2",ke,s(t.$t("Plan details")),1),((C=i.subscription)==null?void 0:C.status)==="trial"?(n(),o("h2",$e,s(t.$t("Trial period")),1)):a("",!0),((A=i.subscription)==null?void 0:A.status)==="active"?(n(),o("h2",Me,s((N=(T=i.subscription)==null?void 0:T.plan)==null?void 0:N.name),1)):a("",!0)]),((Z=i.subscription)==null?void 0:Z.status)!="trial"?(n(),o("div",Se,[e("div",null,[e("h2",Pe,s(t.$t("Start date")),1),e("span",Ce,s((B=i.subscription)==null?void 0:B.start_date),1)]),e("div",null,[e("h2",Ae,s(t.$t("Next billing date")),1),e("span",Te,s((V=i.subscription)==null?void 0:V.valid_until),1)]),e("div",null,[e("h2",Ne,s(t.$t("Account balance")),1),e("span",Ze,s((R=i.subscriptionDetails)==null?void 0:R.accountBalance),1)])])):a("",!0),((j=i.subscription)==null?void 0:j.status)==="trial"?(n(),o("div",Be,[e("div",null,[e("h2",Ve,s(t.$t("Trial expires on")),1),e("span",Re,s((E=i.subscription)==null?void 0:E.valid_until),1)])])):a("",!0)]),e("div",je,[e("div",{class:g(["md:float-right gap-y-2 gap-x-3",i.setting.enable_custom_payment==0?"flex":"grid grid-cols-2"])},[i.setting.enable_custom_payment==1?(n(),o("button",{key:0,onClick:u[1]||(u[1]=l=>w()),type:"button",class:"w-full capitalize rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 mr-2 col-span-2 md:col-span-1 text-center"},s(t.$t("Add payment")),1)):a("",!0),((I=i.subscription)==null?void 0:I.status)==="trial"?(n(),y(r(b),{key:1,href:"/subscription",class:"w-full rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 col-span-2 md:col-span-1 text-center"},{default:p(()=>[d(s(t.$t("Subscribe to plan")),1)]),_:1})):a("",!0),((L=i.subscription)==null?void 0:L.status)==="active"?(n(),y(r(b),{key:2,href:"/subscription",class:"w-full rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 col-span-2 md:col-span-1 text-center"},{default:p(()=>[d(s(t.$t("Upgrade subscription")),1)]),_:1})):a("",!0)],2)])]),e("div",Ee,[e("div",Ie,[e("div",Le,[e("h2",ze,s(t.$t("Invoices")),1),e("p",Oe,[e("span",De,s(t.$t("You can view your invoices and past billing details here")),1)])]),e("div",Fe,[h(ee,{rows:i.rows,filters:i.filters},null,8,["rows","filters"])])])])]),h(se,{label:t.label,isOpen:v.value},{default:p(()=>[e("form",{onSubmit:u[3]||(u[3]=O(l=>F(),["prevent"])),class:"gap-y-4"},[e("h2",He,s(t.$t("Add payment")),1),e("p",Ue,s(t.$t("Add your own custom amount")),1),h(te,{modelValue:r(c).amount,"onUpdate:modelValue":u[2]||(u[2]=l=>r(c).amount=l),error:r(c).errors.amount,name:"",type:"number",class:g("w-100")},null,8,["modelValue","error"]),e("h2",Ye,s(t.$t("Pay via")),1),e("div",qe,[(n(!0),o(z,null,J(i.methods,(l,H)=>(n(),o("div",{key:H,class:""},[e("div",Ge,[e("label",{onClick:U=>x(l.name),for:"myCheckbox",class:"cursor-pointer"},[e("div",{class:g(["w-5 h-5 border border-gray-400 rounded-md flex items-center justify-center",r(c).method===l.name?"bg-[#000]":""])},[r(c).method===l.name?(n(),o("svg",Je,Qe)):a("",!0)],2)],8,We),e("span",{onClick:U=>x(l.name),class:"ml-2 text-sm cursor-pointer"},s(l.name),9,Xe)])]))),128))]),e("div",es,s(r(c).errors.method),1),e("div",ss,[e("button",{type:"button",onClick:O(D,["self"]),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},s(t.$t("Cancel")),1),e("button",{class:g(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":m.value}]),disabled:m.value},[m.value?(n(),o("span",is,[ns,e("span",null,s(t.$t("Processing")),1)])):(n(),o("span",os,[as,e("span",null,s(t.$t("Continue")),1)]))],10,ts)])],32)]),_:1},8,["label","isOpen"])]}),_:1})],64))}};export{Ss as default};
