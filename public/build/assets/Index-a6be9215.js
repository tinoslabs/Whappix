import{g as ot,_ as nt}from"./App-c36b28d4.js";import{r as $,S as Ke,m as se,q as W,E as ie,o as l,c as i,a as e,d as z,t as u,b as g,h as te,f as I,u as N,w as Xe,v as Ye,a2 as it,n as q,F as D,x as oe,K as We,T as ae,g as j,l as U,i as H,k as P,O as K,R as Qe,G as Y,e as F,D as et,a3 as tt,V as ee,W as le,a4 as X,J as rt,a5 as ct,a6 as dt}from"./app-a39c937f.js";import{_ as ut}from"./CampaignForm-5b2a5b2f.js";import{P as pt}from"./style-5ef5fdb3.js";import{_ as ht}from"./AlertModal-3dc931bd.js";import{_ as mt}from"./Dropdown-3f09e41f.js";import{_ as vt,a as Q}from"./DropdownItem-de9e1f1f.js";import{_ as gt}from"./FormSelectCombo-abf5087b.js";import{_ as ft}from"./FormTextArea-e893dff2.js";import{_ as wt}from"./Modal-df1e3aae.js";import{t as yt}from"./index-8758cb17.js";import{d as xt}from"./debounce-c94e6f72.js";import{P as bt}from"./Pagination-10a3ee54.js";import{_ as kt}from"./ContactInfo-62d15806.js";import"./Sidebar-cfdf4c27.js";import"./Menu-bdf286ac.js";import"./ProfileModal-61a09d92.js";import"./FormInput-4b7fa008.js";import"./FormPhoneInput-1c9c9926.js";/* empty css                      */import"./FormSelect-c7672027.js";import"./hidden-695af094.js";import"./use-text-value-d1d229e7.js";import"./transition-37a067aa.js";import"./micro-task-89dcd6af.js";import"./tabs-86fdd039.js";import"./LangToggle-edfcdcaa.js";import"./index-80d9f634.js";import"./MobileSidebar-d61cbb69.js";/* empty css              */import"./pusher-4059f127.js";import"./WhatsappTemplate-4995ebf9.js";import"./use-tree-walker-d82ec41e.js";import"./_baseGetTag-fe27dbe8.js";import"./_plugin-vue_export-helper-c27b6911.js";const Ct={key:0,class:"flex justify-center items-center w-full px-6 md:px-4"},$t={class:"flex items-start space-x-4 bg-orange-100 rounded-lg p-2 mb-2 px-4"},_t={class:"text-sm"},Mt={class:"text-sm"},St={key:1,class:"flex justify-center items-center w-full px-6 md:px-4"},Ot={class:"flex items-center justify-between space-x-4 bg-orange-100 rounded-lg p-2 mb-2 px-4"},Tt={class:"flex items-start justify-between space-x-4"},Vt={class:"text-sm"},Lt={class:"text-sm"},Nt={class:"absolute"},Zt=["onKeydown","placeholder","disabled"],Et=["accept"],Bt=["disabled"],It={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},qt={__name:"ChatForm",props:["contact","chatLimitReached"],emits:["response","viewTemplate"],setup(t,{emit:s}){const a=t,d=$(null),o=$(null),r=$({uuid:a.contact.uuid,message:null,type:null,file:null}),c=$(!1),x=$(null);Ke(()=>{r.value.uuid=a.contact.uuid});const S=s,M=()=>{S("viewTemplate",!0)},f=async()=>{r.value.message=o.value;const k=new FormData;k.append("message",r.value.message),k.append("type",r.value.type),k.append("uuid",r.value.uuid),r.value.file&&k.append("file",r.value.file),d.value=!0;try{const h=await oe.post("/chats",k);r.value.message=null,o.value=null,r.value.file=null,d.value=!1}catch{}},n=$(null),w=()=>{const k=n.value;k.style.height="auto",k.style.height=k.scrollHeight+"px"},b=k=>{o.value!=null&&o.value.trim()!=""&&f()},m=se(()=>{if(a.contact.last_inbound_chat){const k=new Date(a.contact.last_inbound_chat.created_at);return new Date-k<24*60*60*1e3}return!1}),y=k=>{const h=k.target.files[0],C=new FileReader;C.onload=V=>{r.value.file=h,f()},C.readAsDataURL(h)},v=()=>{switch(r.value.type){case"image":return".jpg, .png";case"document":return".txt, .pdf, .ppt, .doc, .xls, .docx, .pptx, .xlsx";case"audio":return".mp3, .ogg";case"video":return".mp4";default:return""}},p=k=>{k.stopPropagation(),c.value=!c.value},T=()=>{c.value=!1},Z=k=>{const h=n.value,C=o.value||"",V=h.selectionStart||0,A=h.selectionEnd||0,O=C.substring(0,V)+k.i+C.substring(A);o.value=O,setTimeout(()=>{h.focus(),h.setSelectionRange(V+k.i.length,V+k.i.length)},0)},E=k=>{x.value&&!x.value.contains(k.target)&&!n.value.contains(k.target)&&T()};return W(()=>{document.addEventListener("click",E)}),ie(()=>{document.removeEventListener("click",E)}),(k,h)=>(l(),i(D,null,[a.chatLimitReached?(l(),i("div",Ct,[e("div",$t,[h[10]||(h[10]=z('<span class="text-red-700"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 36 36"><path fill="currentColor" d="M18 21.32a1.3 1.3 0 0 0 1.3-1.3V14a1.3 1.3 0 1 0-2.6 0v6a1.3 1.3 0 0 0 1.3 1.32Z" class="clr-i-outline clr-i-outline-path-1"></path><circle cx="17.95" cy="24.27" r="1.5" fill="currentColor" class="clr-i-outline clr-i-outline-path-2"></circle><path fill="currentColor" d="M30.33 25.54L20.59 7.6a3 3 0 0 0-5.27 0L5.57 25.54A3 3 0 0 0 8.21 30h19.48a3 3 0 0 0 2.64-4.43Zm-1.78 1.94a1 1 0 0 1-.86.49H8.21a1 1 0 0 1-.88-1.48l9.74-17.94a1 1 0 0 1 1.76 0l9.74 17.94a1 1 0 0 1-.02.99Z" class="clr-i-outline clr-i-outline-path-3"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></span>',1)),e("div",null,[e("div",_t,u(k.$t("Maximum chat limit reached")),1),e("div",Mt,u(k.$t("You have reached the maximum chat limit for your subscription! Please upgrade to send/receive more messages")),1)])])])):g("",!0),!m.value&&!a.chatLimitReached?(l(),i("div",St,[e("div",Ot,[e("div",Tt,[h[11]||(h[11]=z('<span class="text-red-700"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 36 36"><path fill="currentColor" d="M18 21.32a1.3 1.3 0 0 0 1.3-1.3V14a1.3 1.3 0 1 0-2.6 0v6a1.3 1.3 0 0 0 1.3 1.32Z" class="clr-i-outline clr-i-outline-path-1"></path><circle cx="17.95" cy="24.27" r="1.5" fill="currentColor" class="clr-i-outline clr-i-outline-path-2"></circle><path fill="currentColor" d="M30.33 25.54L20.59 7.6a3 3 0 0 0-5.27 0L5.57 25.54A3 3 0 0 0 8.21 30h19.48a3 3 0 0 0 2.64-4.43Zm-1.78 1.94a1 1 0 0 1-.86.49H8.21a1 1 0 0 1-.88-1.48l9.74-17.94a1 1 0 0 1 1.76 0l9.74 17.94a1 1 0 0 1-.02.99Z" class="clr-i-outline clr-i-outline-path-3"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></span>',1)),e("div",null,[e("div",Vt,u(k.$t("24 hour limit")),1),e("div",Lt,u(k.$t("Whatsapp does not allow sending messages 24 hours after they last messaged you. However, you can send them a template message")),1)])]),e("button",{onClick:h[0]||(h[0]=C=>M()),class:"rounded-md bg-primary px-3 py-1 text-sm text-white shadow-sm w-[25%]"},"Send Template")])])):g("",!0),m.value&&!a.chatLimitReached?(l(),i("form",{key:2,onSubmit:h[9]||(h[9]=te(C=>f(),["prevent"])),class:"flex items-center px-2 md:px-10 space-x-2"},[e("div",{class:q(["flex items-center w-full rounded-lg py-4 md:py-2 pl-2 pr-2",d.value?"bg-gray-200":"bg-white"])},[e("div",Nt,[e("button",{type:"button",onClick:p},"ðŸ˜€"),c.value?(l(),i("div",{key:0,class:"absolute left-0 bottom-full",ref_key:"emojiPickerRef",ref:x},[I(N(pt),{native:!0,onSelect:Z})],512)):g("",!0)]),Xe(e("textarea",{ref_key:"textInputRef",ref:n,onFocus:h[1]||(h[1]=C=>r.value.type="text"),onKeydown:it(te(b,["exact","prevent"]),["enter"]),class:q(["w-full ml-3 outline-none resize-none text-sm md:text-base pl-6",d.value?"bg-gray-200":"bg-white"]),"onUpdate:modelValue":h[2]||(h[2]=C=>o.value=C),onInput:w,type:"text",rows:"1",placeholder:k.$t("Type your message..."),disabled:d.value},"            ",42,Zt),[[Ye,o.value]]),e("input",{type:"file",class:"sr-only",accept:v(),id:"file-upload",onChange:h[3]||(h[3]=C=>y(C))},null,40,Et),e("label",{onClick:h[4]||(h[4]=C=>r.value.type="image"),for:"file-upload",class:"text-slate-500 mr-2 cursor-pointer"},h[12]||(h[12]=[z('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M6.5 8a2 2 0 1 0 4 0a2 2 0 0 0-4 0Zm14.427 1.99c-6.61-.908-12.31 4-11.927 10.51"></path><path d="M3 13.066c2.78-.385 5.275.958 6.624 3.1"></path><path d="M3 12c0-4.243 0-6.364 1.318-7.682C5.636 3 7.758 3 12 3c4.243 0 6.364 0 7.682 1.318C21 5.636 21 7.758 21 12c0 4.243 0 6.364-1.318 7.682C18.364 21 16.242 21 12 21c-4.243 0-6.364 0-7.682-1.318C3 18.364 3 16.242 3 12Z"></path></g></svg>',1)])),e("label",{onClick:h[5]||(h[5]=C=>r.value.type="document"),for:"file-upload",class:"text-slate-500 mr-1 cursor-pointer"},h[13]||(h[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},[e("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M3 10c0-3.771 0-5.657 1.172-6.828C5.343 2 7.229 2 11 2h2c3.771 0 5.657 0 6.828 1.172C21 4.343 21 6.229 21 10v4c0 3.771 0 5.657-1.172 6.828C18.657 22 16.771 22 13 22h-2c-3.771 0-5.657 0-6.828-1.172C3 19.657 3 17.771 3 14v-4Z"}),e("path",{"stroke-linecap":"round",d:"M8 10h8m-8 4h5"})])],-1)])),e("label",{onClick:h[6]||(h[6]=C=>r.value.type="audio"),for:"file-upload",class:"text-slate-500 mr-1 cursor-pointer"},h[14]||(h[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 1024 1024"},[e("path",{fill:"currentColor",d:"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8c0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8c0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1M512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168m-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92z"})],-1)])),e("label",{onClick:h[7]||(h[7]=C=>r.value.type="video"),for:"file-upload",class:"text-slate-500 mr-2 cursor-pointer"},h[15]||(h[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 32 32"},[e("path",{fill:"currentColor",d:"M6.5 5.5A4.5 4.5 0 0 0 2 10v12a4.5 4.5 0 0 0 4.5 4.5h12A4.5 4.5 0 0 0 23 22v-1.5l4.2 3.15c1.153.865 2.8.042 2.8-1.4V9.75c0-1.442-1.647-2.265-2.8-1.4L23 11.5V10a4.5 4.5 0 0 0-4.5-4.5zM23 14l5-3.75v11.5L23 18zm-2-4v12a2.5 2.5 0 0 1-2.5 2.5h-12A2.5 2.5 0 0 1 4 22V10a2.5 2.5 0 0 1 2.5-2.5h12A2.5 2.5 0 0 1 21 10"})],-1)])),e("label",{onClick:h[8]||(h[8]=C=>M()),class:"text-slate-500 mr-4 cursor-pointer"},h[16]||(h[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 256 256"},[e("path",{fill:"currentColor",d:"M216 80h-32V48a16 16 0 0 0-16-16H40a16 16 0 0 0-16 16v128a8 8 0 0 0 13 6.22L72 154v30a16 16 0 0 0 16 16h93.59L219 230.22a8 8 0 0 0 5 1.78a8 8 0 0 0 8-8V96a16 16 0 0 0-16-16M66.55 137.78L40 159.25V48h128v88H71.58a8 8 0 0 0-5.03 1.78M216 207.25l-26.55-21.47a8 8 0 0 0-5-1.78H88v-32h80a16 16 0 0 0 16-16V96h32Z"})],-1)])),e("button",{class:"flex items-center",type:"submit",disabled:o.value===null||o.value.trim()===""||d.value},[d.value?(l(),i("svg",It,h[18]||(h[18]=[z('<circle cx="12" cy="2" r="0" fill="currentColor"><animate attributeName="r" begin="0" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(45 12 12)"><animate attributeName="r" begin="0.125s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(90 12 12)"><animate attributeName="r" begin="0.25s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(135 12 12)"><animate attributeName="r" begin="0.375s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(180 12 12)"><animate attributeName="r" begin="0.5s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(225 12 12)"><animate attributeName="r" begin="0.625s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(270 12 12)"><animate attributeName="r" begin="0.75s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle><circle cx="12" cy="2" r="0" fill="currentColor" transform="rotate(315 12 12)"><animate attributeName="r" begin="0.875s" calcMode="spline" dur="1s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" repeatCount="indefinite" values="0;2;0;0"></animate></circle>',8)]))):(l(),i("svg",{key:0,class:q(o.value===null||o.value.trim()===""?"text-slate-300":"text-black"),xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 16 16"},h[17]||(h[17]=[e("path",{fill:"currentColor",d:"M1.724 1.053a.5.5 0 0 0-.714.545l1.403 4.85a.5.5 0 0 0 .397.354l5.69.953c.268.053.268.437 0 .49l-5.69.953a.5.5 0 0 0-.397.354l-1.403 4.85a.5.5 0 0 0 .714.545l13-6.5a.5.5 0 0 0 0-.894l-13-6.5Z"},null,-1)]),2))],8,Bt)],2)],32)):g("",!0)],64))}},jt={class:"h-20 bg-white border-b border-1 flex items-center justify-between px-4 md:px-4"},Pt={class:"flex items-center gap-x-4 cursor-pointer w-3/4"},Ht=["src"],At={key:1,class:"rounded-full w-10 h-10 flex items-center justify-center bg-slate-100"},zt={class:"flex items-center w-full gap-x-8"},Dt={class:"w-full flex items-center text-xs"},Rt={class:"flex items-center space-x-4"},Jt={key:0,class:"flex justify-between items-center bg-white border-b border-1 py-2 px-4 md:px-4"},Ut={class:"flex items-center gap-x-2"},Ft={class:"text-[13px]"},Gt={class:"mt-5 grid grid-cols-1 gap-x-6 gap-y-4"},Kt={class:"mt-4 flex"},Xt=["disabled"],Yt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Wt={key:1},Qt={__name:"ChatHeader",props:["contact","displayContactInfo","ticketingIsEnabled","ticket","addon"],emits:["toggleView","deleteThread","closeThread"],setup(t,{emit:s}){var Z,E,k,h,C,V,A;const a=t,d=se(()=>We().props.auth.user),o=$(!1),r=$(a.displayContactInfo),c=$(null),x=$(!1),S=$({label:(Z=a.ticket)!=null&&Z.user?(k=(E=a.ticket)==null?void 0:E.user)==null?void 0:k.full_name:yt("Unassigned"),value:(h=a.ticket)!=null&&h.user?(V=(C=a.ticket)==null?void 0:C.user)==null?void 0:V.id:0});Ke(()=>{var O;r.value=a.displayContactInfo,c.value=(O=a.ticket)==null?void 0:O.status});const M=s,f=()=>{r.value=!r.value,M("toggleView",r.value)},n=()=>{K.visit("/chats/"+a.contact.uuid,{method:"delete",onFinish:()=>{o.value=!1}})};ae({status:c});const w=ae({notes:null,contact:null}),b=ae({ai_assistant:(A=a.contact)==null?void 0:A.ai_assistance_enabled}),m=O=>{K.put("/tickets/"+a.contact.uuid+"/update",{status:O},{})},y=()=>{K.put("/tickets/"+a.contact.uuid+"/assign",{id:S.value.value},{})};function v(O,_){fetch("/team?search="+O,{headers:{Accept:"application/json"}}).then(L=>L.json()).then(L=>{_(L.rows)}).catch(L=>{console.error("Error fetching agents:",L)})}const p=()=>{w.contact=a.contact.uuid,w.post("/notes",{preserveState:!1,onSuccess:()=>{w.reset(),x.value=!1}})},T=()=>{b.ai_assistant=!b.ai_assistant,b.post("/automation/contact/"+a.contact.uuid,{preserveState:!0})};return(O,_)=>(l(),i(D,null,[e("div",jt,[e("div",Pt,[I(N(U),{href:"/chats",class:"sm:block md:hidden"},{default:j(()=>_[13]||(_[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M19 11H7.14l3.63-4.36a1 1 0 1 0-1.54-1.28l-5 6a1.19 1.19 0 0 0-.09.15c0 .05 0 .08-.07.13A1 1 0 0 0 4 12a1 1 0 0 0 .07.36c0 .05 0 .08.07.13a1.19 1.19 0 0 0 .09.15l5 6A1 1 0 0 0 10 19a1 1 0 0 0 .64-.23a1 1 0 0 0 .13-1.41L7.14 13H19a1 1 0 0 0 0-2"})],-1)])),_:1}),e("div",{onClick:f},[t.contact.avatar?(l(),i("img",{key:0,class:"rounded-full w-14 h-14",src:t.contact.avatar},null,8,Ht)):(l(),i("div",At,u(t.contact.full_name.substring(0,1)),1))]),e("div",zt,[e("div",null,[e("div",{class:"flex items-center",onClick:f},[e("span",null,u(t.contact.full_name),1)]),e("div",Dt,[e("span",{onClick:f},u(t.contact.formatted_phone_number),1)])]),t.ticketingIsEnabled&&d.value.teams[0].role!="agent"?(l(),H(gt,{key:0,modelValue:S.value,"onUpdate:modelValue":[_[0]||(_[0]=L=>S.value=L),_[1]||(_[1]=L=>y())],name:"",loadOptions:v,class:q("col-span-1 md:block hidden"),placeholder:"Select Agent"},null,8,["modelValue"])):g("",!0)])]),e("div",null,[e("div",Rt,[c.value==="open"&&t.ticketingIsEnabled?(l(),i("button",{key:0,onClick:_[2]||(_[2]=L=>m("closed")),class:"text-sm md:inline-flex hidden justify-center rounded-md border border-transparent bg-red-800 px-4 py-1 text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},u(O.$t("Mark as closed")),1)):g("",!0),c.value==="closed"&&t.ticketingIsEnabled?(l(),i("button",{key:1,onClick:_[3]||(_[3]=L=>m("open")),class:"text-sm md:inline-flex hidden justify-center rounded-md border border-transparent bg-primary px-4 py-1 text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"},u(O.$t("Mark as open")),1)):g("",!0),r.value?(l(),i("div",{key:3,onClick:f,class:"bg-slate-200 p-2 rounded-lg text-sm cursor-pointer"},[e("span",null,u(O.$t("Back")),1)])):(l(),H(mt,{key:2},{items:j(()=>[I(vt,null,{default:j(()=>[I(Q,{onClick:_[4]||(_[4]=L=>{x.value=!0}),as:"button"},{default:j(()=>[P(u(O.$t("Add notes")),1)]),_:1}),c.value==="open"&&t.ticketingIsEnabled?(l(),H(Q,{key:0,onClick:_[5]||(_[5]=L=>m("closed")),as:"button"},{default:j(()=>[P(u(O.$t("Mark as closed")),1)]),_:1})):g("",!0),c.value==="closed"&&t.ticketingIsEnabled?(l(),H(Q,{key:1,onClick:_[6]||(_[6]=L=>m("open")),as:"button"},{default:j(()=>[P(u(O.$t("Mark as open")),1)]),_:1})):g("",!0),I(Q,{onClick:_[7]||(_[7]=L=>o.value=!0),as:"button"},{default:j(()=>[P(u(O.$t("Clear chat")),1)]),_:1})]),_:1})]),default:j(()=>[_[14]||(_[14]=e("button",{type:"button",class:"inline-flex w-full justify-center items-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[e("span",{class:"bg-slate-200 p-1 rounded-full cursor-pointer flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 6.75a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5Zm0 6a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5Zm0 6a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5Z"})])])],-1))]),_:1}))])])]),t.addon==1?(l(),i("div",Jt,[e("div",{class:q(["text-sm py-1 px-3 rounded-md flex items-center gap-x-2 w-[fit-content]",N(b).ai_assistant?"bg-green-50":"bg-red-50"])},[e("span",{class:q(N(b).ai_assistant?"text-green-500":"text-red-500")},_[15]||(_[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"})],-1)]),2),e("span",null,u(O.$t("AI Assistant")),1)],2),e("div",Ut,[e("span",Ft,u(O.$t("Enable/disable AI assistant")),1),e("div",{class:q(["w-12 h-6 flex items-center bg-gray-300 rounded-full p-1 cursor-pointer",{"bg-primary":N(b).ai_assistant}]),onClick:_[8]||(_[8]=L=>T())},[e("div",{class:q(["bg-white w-4 h-4 rounded-full shadow-md transform duration-300 ease-in-out",{"translate-x-6":N(b).ai_assistant}])},null,2)],2)])])):g("",!0),I(wt,{label:"Add Note",isOpen:x.value},{default:j(()=>[e("div",Gt,[e("form",{onSubmit:_[11]||(_[11]=te(L=>p(),["prevent"])),class:""},[I(ft,{modelValue:N(w).notes,"onUpdate:modelValue":_[9]||(_[9]=L=>N(w).notes=L),error:N(w).errors.note,name:"",class:q("col-span-2")},null,8,["modelValue","error"]),e("div",Kt,[e("button",{type:"button",onClick:_[10]||(_[10]=te(L=>x.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},u(O.$t("Cancel")),1),e("button",{class:q(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":N(w).processing}]),disabled:N(w).processing},[N(w).processing?(l(),i("svg",Yt,_[16]||(_[16]=[e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)]))):(l(),i("span",Wt,u(O.$t("Save")),1))],10,Xt)])],32)])]),_:1},8,["isOpen"]),I(ht,{modelValue:o.value,"onUpdate:modelValue":_[12]||(_[12]=L=>o.value=L),label:O.$t("Clear chat"),description:O.$t("Are you sure you want to delete this thread? You can't undo this action"),onConfirm:n},null,8,["modelValue","label","description"])],64))}},es={class:"relative text-sm"},ts={class:"cursor-pointer flex items-center space-x-1 bg-slate-50 w-[fit-content] h-[fit-content] rounded-md p-1 px-2 text-sm"},ss={class:"capitalize"},as={class:"text-slate-500"},ls={key:0,class:"absolute bg-white z-10 px-1 py-2 mt-2 shadow w-full rounded-md text-black"},os={__name:"TicketStatusToggle",props:{languages:Object,currentLanguage:String,status:String,rowCount:Number},setup(t){const s=t,a=$(!1),d=()=>{a.value=!a.value},o=c=>{a.value&&!c.target.closest(".status-dd")&&(a.value=!1)},r=c=>c?c.charAt(0).toUpperCase()+c.slice(1):"";return W(()=>{document.body.addEventListener("click",o)}),Qe(()=>{document.body.removeEventListener("click",o)}),(c,x)=>(l(),i("div",es,[e("div",{onClick:x[0]||(x[0]=S=>d()),class:"status-dd"},[e("div",ts,[e("span",ss,u(c.$t(r(s.status))),1),e("span",as,u(s.rowCount),1),x[1]||(x[1]=e("span",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor","fill-rule":"evenodd",d:"M16.53 8.97a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06L12 12.44l3.47-3.47a.75.75 0 0 1 1.06 0","clip-rule":"evenodd"})])],-1))])]),a.value?(l(),i("div",ls,[e("div",null,[I(N(U),{href:"/chats?status=unassigned",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:j(()=>[P(u(c.$t("Unassigned")),1)]),_:1}),I(N(U),{href:"/chats?status=open",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:j(()=>[P(u(c.$t("Open")),1)]),_:1}),I(N(U),{href:"/chats?status=closed",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:j(()=>[P(u(c.$t("Closed")),1)]),_:1}),I(N(U),{href:"/chats?status=all",class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"},{default:j(()=>[P(u(c.$t("All")),1)]),_:1})])])):g("",!0)]))}},ns={class:"text-sm"},is={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},rs={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},cs={key:0,class:"absolute bg-white z-10 px-1 py-2 mt-2 shadow w-[7em] rounded-md text-black"},ds={__name:"SortDirectionToggle",props:{direction:String,url:String},setup(t){const s=t,a=$(!1),d=()=>{a.value=!a.value},o=c=>{a.value&&!c.target.closest(".sort-dd")&&(a.value=!1)};W(()=>{document.body.addEventListener("click",o)}),Qe(()=>{document.body.removeEventListener("click",o)});const r=c=>{K.post(s.url,{sort:c},{preserveState:!1})};return(c,x)=>(l(),i("div",ns,[e("span",{onClick:x[0]||(x[0]=S=>d()),class:"cursor-pointer hover:bg-slate-50 p-1 rounded-full sort-dd block"},[t.direction=="desc"?(l(),i("svg",is,x[3]||(x[3]=[e("path",{fill:"currentColor",d:"M3.5 13.5a.5.5 0 0 1-1 0V4.707L1.354 5.854a.5.5 0 1 1-.708-.708l2-1.999l.007-.007a.5.5 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L3.5 4.707zm4-9.5a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1zm0 3a.5.5 0 0 1 0-1h3a.5.5 0 0 1 0 1zm0 3a.5.5 0 0 1 0-1h5a.5.5 0 0 1 0 1zM7 12.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5"},null,-1)]))):(l(),i("svg",rs,x[4]||(x[4]=[e("path",{fill:"currentColor",d:"M3.5 2.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999l.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 11.293zm3.5 1a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5M7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"},null,-1)])))]),a.value?(l(),i("div",cs,[e("div",null,[e("div",{onClick:x[1]||(x[1]=S=>r("desc")),class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"}," Newest "),e("div",{onClick:x[2]||(x[2]=S=>r("asc")),class:"block px-2 py-1 cursor-pointer hover:bg-slate-100 rounded-md"}," Oldest ")])])):g("",!0)]))}},us={class:"px-4 py-4 border-b"},ps={class:"flex items-center justify-between space-x-1 text-xl"},hs={class:"flex space-x-1"},ms={class:"text-slate-500"},vs={class:"bg-slate-50 rounded-md mt-3 flex items-center py-[2px]"},gs=["placeholder"],fs={key:1,class:"pr-2"},ws={key:0,class:"grid grid-cols-2 mt-4 items-center w-full"},ys={class:"flex ml-auto gap-x-1"},xs={class:"flex-grow overflow-y-auto h-[65vh]",ref:"scrollContainer"},bs={class:"flex space-x-2 hover:bg-gray-50 cursor-pointer py-3 px-4"},ks={class:"w-[15%]"},Cs=["src"],$s={key:1,class:"rounded-full w-10 h-10 flex items-center justify-center bg-slate-200 capitalize"},_s={class:"w-[85%]"},Ms={class:"flex justify-between"},Ss={class:"truncate"},Os={class:"self-center text-slate-500 text-xs"},Ts={key:0,class:"flex justify-between"},Vs={key:0,class:"text-slate-500 text-xs truncate self-end"},Ls={key:1,class:"text-slate-500 text-xs truncate self-end"},Ns={key:2,class:"text-slate-500 text-xs truncate self-end"},Zs={key:3,class:"text-slate-500 text-xs truncate self-end"},Es={class:"flex items-center"},Bs={class:"ml-2"},Is={key:4,class:"text-slate-500 text-xs truncate self-end"},qs={class:"flex items-center"},js={class:"ml-2"},Ps={key:5,class:"text-slate-500 text-xs truncate self-end"},Hs={class:"flex items-center"},As={class:"ml-2"},zs={key:6,class:"text-slate-500 text-xs truncate self-end"},Ds={class:"flex items-center"},Rs={class:"ml-2"},Js={key:7,class:"text-slate-500 text-xs truncate self-end"},Us={class:"flex items-center"},Fs={class:"ml-2"},Gs={key:8,class:"text-slate-500 text-xs truncate self-end"},Ks={class:"flex items-center"},Xs={class:"ml-2"},Ys={key:9,class:"text-slate-500 text-xs truncate self-end"},Ws={class:"flex items-center"},Qs={class:"ml-2"},ea={key:10,class:"bg-green-600 text-white rounded-md py-[1px] px-[8px] min-w-10 text-[10px] flex items-center justify-center"},ta={class:"px-4 pb-4"},sa={__name:"ChatTable",props:{rows:{type:Object,required:!0},filters:{type:Object},rowCount:{type:Number,required:!0},ticketingIsEnabled:{type:Boolean},status:{type:String},chatSortDirection:{type:String}},emits:["view"],setup(t,{emit:s}){const a=t,d=$(!1);$(null);const o=y=>JSON.parse(y).type,r=y=>JSON.parse(y),c=y=>({"text/plain":"TXT","application/pdf":"PDF","application/vnd.ms-powerpoint":"PPT","application/msword":"DOC","application/vnd.ms-excel":"XLS","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"DOCX","application/vnd.openxmlformats-officedocument.presentationml.presentation":"PPTX","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"XLSX"})[y]||"Unknown",x=y=>{const v=JSON.parse(y).contacts;if(v.length===1){const p=v[0];return p.name.formatted_name||`${p.name.first_name} ${p.name.last_name}`}else if(v.length>1){const p=v[0].name.first_name,T=v.length-1;return`${p} and ${T} other contacts`}else return"No contacts available"},S=y=>{const v=new Date,p=new Date(y);if(p.getDate()===v.getDate()&&p.getMonth()===v.getMonth()&&p.getFullYear()===v.getFullYear())return M(p,"h:mm a");const T=new Date;return T.setDate(v.getDate()-1),p.getDate()===T.getDate()&&p.getMonth()===T.getMonth()&&p.getFullYear()===T.getFullYear()?"Yesterday":M(p,"d/m/y")},M=(y,v)=>{let p=null;return v==="h:mm a"?p={hour12:!0,hour:"numeric",minute:"numeric"}:p={day:"numeric",month:"numeric",year:"numeric"},new Intl.DateTimeFormat("en-US",p).format(y)},f=window.location.search;Y(()=>f,(y,v)=>{console.log("Query parameters changed:",y)});const n=$({search:a.filters.search}),w=xt(()=>{d.value=!0,b()},1e3),b=()=>{const y=window.location.pathname;K.visit(y,{method:"get",data:n.value})},m=()=>{n.value.search=null,b()};return(y,v)=>(l(),i(D,null,[e("div",us,[e("div",ps,[e("div",hs,[e("h2",null,u(y.$t("Chats")),1),e("span",ms,u(t.rowCount),1)])]),e("div",vs,[v[4]||(v[4]=e("div",{class:"pl-3 py-2"},[e("svg",{class:"text-slate-600",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10a7 7 0 1 0 14 0a7 7 0 1 0-14 0m18 11l-6-6"})])],-1)),Xe(e("input",{onInput:v[0]||(v[0]=(...p)=>N(w)&&N(w)(...p)),"onUpdate:modelValue":v[1]||(v[1]=p=>n.value.search=p),class:"w-full bg-slate-50 outline-none rounded-xl py-2 pl-2 mr-2 text-sm",type:"text",placeholder:y.$t("Search name or number...")},null,40,gs),[[Ye,n.value.search]]),d.value===!1&&n.value.search?(l(),i("button",{key:0,onClick:m,type:"button",class:"pr-2"},v[2]||(v[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2zm3.7 12.3c.4.4.4 1 0 1.4c-.4.4-1 .4-1.4 0L12 13.4l-2.3 2.3c-.4.4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4l2.3-2.3l-2.3-2.3c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0l2.3 2.3l2.3-2.3c.4-.4 1-.4 1.4 0c.4.4.4 1 0 1.4L13.4 12l2.3 2.3z"})],-1)]))):g("",!0),d.value?(l(),i("span",fs,v[3]||(v[3]=[z('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="0 12 12;90 12 12;180 12 12;270 12 12"></animateTransform><animate attributeName="opacity" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.2s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="30 12 12;120 12 12;210 12 12;300 12 12"></animateTransform><animate attributeName="opacity" begin="0.2s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle><circle cx="12" cy="3.5" r="1.5" fill="currentColor" opacity="0"><animateTransform attributeName="transform" begin="0.4s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="60 12 12;150 12 12;240 12 12;330 12 12"></animateTransform><animate attributeName="opacity" begin="0.4s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"></animate></circle></svg>',1)]))):g("",!0)]),t.ticketingIsEnabled?(l(),i("div",ws,[I(os,{status:t.status,rowCount:t.rowCount},null,8,["status","rowCount"]),e("div",ys,[I(ds,{direction:a.chatSortDirection,url:"/chats/update-sort-direction"},null,8,["direction"])])])):g("",!0)]),e("div",xs,[(l(!0),i(D,null,F(t.rows.data,(p,T)=>(l(),H(N(U),{href:"/chats/"+p.uuid+"?page="+a.rows.meta.current_page,class:q(["block border-b group-hover:pr-0",p.unread_messages>0?"bg-green-50":""]),key:T},{default:j(()=>{var Z,E,k,h;return[e("div",bs,[e("div",ks,[p.avatar?(l(),i("img",{key:0,class:"rounded-full w-10 h-10",src:p.avatar},null,8,Cs)):(l(),i("div",$s,u(p.full_name.substring(0,1)),1))]),e("div",_s,[e("div",Ms,[e("h3",Ss,u(p.full_name),1),e("span",Os,u(S(p.last_chat.created_at)),1)]),p.last_chat.deleted_at===null?(l(),i("div",Ts,[o(p.last_chat.metadata)==="text"?(l(),i("div",Vs,u(r(p.last_chat.metadata).text.body),1)):g("",!0),o(p.last_chat.metadata)==="button"?(l(),i("div",Ls,u(r(p.last_chat.metadata).button.text),1)):g("",!0),o(p.last_chat.metadata)==="interactive"?(l(),i("div",Ns,u(((E=(Z=r(p.last_chat.metadata).interactive)==null?void 0:Z.button_reply)==null?void 0:E.title)||((h=(k=r(p.last_chat.metadata).interactive)==null?void 0:k.list_reply)==null?void 0:h.title)),1)):g("",!0),o(p.last_chat.metadata)==="image"?(l(),i("div",Zs,[e("div",Es,[v[5]||(v[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.9 13.98l2.1 2.53l3.1-3.99c.2-.26.6-.26.8.01l3.51 4.68a.5.5 0 0 1-.4.8H6.02c-.42 0-.65-.48-.39-.81L8.12 14c.19-.26.57-.27.78-.02z"})],-1)),e("span",Bs,u(y.$t("Photo")),1)])])):g("",!0),o(p.last_chat.metadata)==="document"?(l(),i("div",Is,[e("div",qs,[v[6]||(v[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor","fill-rule":"evenodd",d:"M14.25 2.5a.25.25 0 0 0-.25-.25H7A2.75 2.75 0 0 0 4.25 5v14A2.75 2.75 0 0 0 7 21.75h10A2.75 2.75 0 0 0 19.75 19V9.147a.25.25 0 0 0-.25-.25H15a.75.75 0 0 1-.75-.75V2.5Zm.75 9.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h6Zm0 4a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h6Z","clip-rule":"evenodd"}),e("path",{fill:"currentColor",d:"M15.75 2.824c0-.184.193-.301.336-.186c.121.098.23.212.323.342l3.013 4.197c.068.096-.006.22-.124.22H16a.25.25 0 0 1-.25-.25V2.824Z"})],-1)),e("span",js,u(c(p.last_chat.media.type))+" "+u(y.$t("File")),1)])])):g("",!0),o(p.last_chat.metadata)==="video"?(l(),i("div",Ps,[e("div",Hs,[v[7]||(v[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M3.5 2.5A2.5 2.5 0 0 0 1 5v6a2.5 2.5 0 0 0 2.5 2.5h5A2.5 2.5 0 0 0 11 11V5a2.5 2.5 0 0 0-2.5-2.5h-5Zm10.684 1.61L12 5.893v4.215l2.184 1.78a.5.5 0 0 0 .816-.389v-7a.5.5 0 0 0-.816-.387Z"})],-1)),e("span",As,u(y.$t("Video")),1)])])):g("",!0),o(p.last_chat.metadata)==="audio"?(l(),i("div",zs,[e("div",Ds,[v[8]||(v[8]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 512 512"},[e("path",{fill:"currentColor",d:"M256 80C149.9 80 62.4 159.4 49.6 262c9.4-3.8 19.6-6 30.4-6c26.5 0 48 21.5 48 48v128c0 26.5-21.5 48-48 48c-44.2 0-80-35.8-80-80V288C0 146.6 114.6 32 256 32s256 114.6 256 256v112c0 44.2-35.8 80-80 80c-26.5 0-48-21.5-48-48V304c0-26.5 21.5-48 48-48c10.8 0 21 2.1 30.4 6C449.6 159.4 362.1 80 256 80z"})],-1)),e("span",Rs,u(y.$t("Audio")),1)])])):g("",!0),o(p.last_chat.metadata)==="sticker"?(l(),i("div",Js,[e("div",Us,[v[9]||(v[9]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 256 256"},[e("path",{fill:"currentColor",d:"M168 32H88a56.06 56.06 0 0 0-56 56v80a56.06 56.06 0 0 0 56 56h48a8.07 8.07 0 0 0 2.53-.41c26.23-8.75 76.31-58.83 85.06-85.06A8.07 8.07 0 0 0 224 136V88a56.06 56.06 0 0 0-56-56Zm-32 175.42V176a40 40 0 0 1 40-40h31.42c-9.26 21.55-49.87 62.16-71.42 71.42Z"})],-1)),e("span",Fs,u(y.$t("Sticker")),1)])])):g("",!0),o(p.last_chat.metadata)==="contacts"?(l(),i("div",Gs,[e("div",Ks,[v[10]||(v[10]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M3 14s-1 0-1-1s1-4 6-4s6 3 6 4s-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6a3 3 0 0 0 0 6Z"})],-1)),e("span",Xs,u(x(p.last_chat.metadata)),1)])])):g("",!0),o(p.last_chat.metadata)==="location"?(l(),i("div",Ys,[e("div",Ws,[v[11]||(v[11]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M9.156 14.544C10.899 13.01 14 9.876 14 7A6 6 0 0 0 2 7c0 2.876 3.1 6.01 4.844 7.544a1.736 1.736 0 0 0 2.312 0ZM6 7a2 2 0 1 1 4 0a2 2 0 0 1-4 0Z"})],-1)),e("span",Qs,u(y.$t("Location")),1)])])):g("",!0),p.unread_messages>0?(l(),i("span",ea,u(p.unread_messages),1)):g("",!0)])):g("",!0)])])]}),_:2},1032,["href","class"]))),128))],512),e("div",ta,[I(bt,{class:"mt-3",pagination:t.rows.meta},null,8,["pagination"])])],64))}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".mapdiv[data-v-174b771e]{width:100%;height:100%}.info-window-wrapper[data-v-90174664]{display:none}.mapdiv .info-window-wrapper[data-v-90174664]{display:inline-block}.custom-marker-wrapper[data-v-2d2d343a]{display:none}.mapdiv .custom-marker-wrapper[data-v-2d2d343a]{display:inline-block}")),document.head.appendChild(t)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();var aa=Object.defineProperty,la=(t,s,a)=>s in t?aa(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,Re=(t,s,a)=>(la(t,typeof s!="symbol"?s+"":s,a),a);const st=Symbol("map"),at=Symbol("api"),oa=Symbol("marker"),na=Symbol("markerCluster"),re=Symbol("CustomMarker"),ia=Symbol("mapTilesLoaded"),lt=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ra(t,s,a,d){function o(r){return r instanceof a?r:new a(function(c){c(r)})}return new(a||(a=Promise))(function(r,c){function x(f){try{M(d.next(f))}catch(n){c(n)}}function S(f){try{M(d.throw(f))}catch(n){c(n)}}function M(f){f.done?r(f.value):o(f.value).then(x,S)}M((d=d.apply(t,s||[])).next())})}var ca=function t(s,a){if(s===a)return!0;if(s&&a&&typeof s=="object"&&typeof a=="object"){if(s.constructor!==a.constructor)return!1;var d,o,r;if(Array.isArray(s)){if(d=s.length,d!=a.length)return!1;for(o=d;o--!==0;)if(!t(s[o],a[o]))return!1;return!0}if(s.constructor===RegExp)return s.source===a.source&&s.flags===a.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===a.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===a.toString();if(r=Object.keys(s),d=r.length,d!==Object.keys(a).length)return!1;for(o=d;o--!==0;)if(!Object.prototype.hasOwnProperty.call(a,r[o]))return!1;for(o=d;o--!==0;){var c=r[o];if(!t(s[c],a[c]))return!1}return!0}return s!==s&&a!==a};const Je="__googleMapsScriptId";var G;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(G||(G={}));class J{constructor({apiKey:s,authReferrerPolicy:a,channel:d,client:o,id:r=Je,language:c,libraries:x=[],mapIds:S,nonce:M,region:f,retries:n=3,url:w="https://maps.googleapis.com/maps/api/js",version:b}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=s,this.authReferrerPolicy=a,this.channel=d,this.client=o,this.id=r||Je,this.language=c,this.libraries=x,this.mapIds=S,this.nonce=M,this.region=f,this.retries=n,this.url=w,this.version=b,J.instance){if(!ca(this.options,J.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(J.instance.options)}`);return J.instance}J.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?G.FAILURE:this.done?G.SUCCESS:this.loading?G.LOADING:G.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let s=this.url;return s+="?callback=__googleMapsCallback",this.apiKey&&(s+=`&key=${this.apiKey}`),this.channel&&(s+=`&channel=${this.channel}`),this.client&&(s+=`&client=${this.client}`),this.libraries.length>0&&(s+=`&libraries=${this.libraries.join(",")}`),this.language&&(s+=`&language=${this.language}`),this.region&&(s+=`&region=${this.region}`),this.version&&(s+=`&v=${this.version}`),this.mapIds&&(s+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(s+=`&auth_referrer_policy=${this.authReferrerPolicy}`),s}deleteScript(){const s=document.getElementById(this.id);s&&s.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((s,a)=>{this.loadCallback(d=>{d?a(d.error):s(window.google)})})}importLibrary(s){return this.execute(),google.maps.importLibrary(s)}loadCallback(s){this.callbacks.push(s),this.execute()}setScript(){var s,a;if(document.getElementById(this.id)){this.callback();return}const d={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(d).forEach(r=>!d[r]&&delete d[r]),!((a=(s=window==null?void 0:window.google)===null||s===void 0?void 0:s.maps)===null||a===void 0)&&a.importLibrary||(r=>{let c,x,S,M="The Google Maps JavaScript API",f="google",n="importLibrary",w="__ib__",b=document,m=window;m=m[f]||(m[f]={});const y=m.maps||(m.maps={}),v=new Set,p=new URLSearchParams,T=()=>c||(c=new Promise((Z,E)=>ra(this,void 0,void 0,function*(){var k;yield x=b.createElement("script"),x.id=this.id,p.set("libraries",[...v]+"");for(S in r)p.set(S.replace(/[A-Z]/g,h=>"_"+h[0].toLowerCase()),r[S]);p.set("callback",f+".maps."+w),x.src=this.url+"?"+p,y[w]=Z,x.onerror=()=>c=E(Error(M+" could not load.")),x.nonce=this.nonce||((k=b.querySelector("script[nonce]"))===null||k===void 0?void 0:k.nonce)||"",b.head.append(x)})));y[n]?console.warn(M+" only loads once. Ignoring:",r):y[n]=(Z,...E)=>v.add(Z)&&T().then(()=>y[n](Z,...E))})(d);const o=this.libraries.map(r=>this.importLibrary(r));o.length||o.push(this.importLibrary("core")),Promise.all(o).then(()=>this.callback(),r=>{const c=new ErrorEvent("error",{error:r});this.loadErrorCallback(c)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(s){if(this.errors.push(s),this.errors.length<=this.retries){const a=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${a} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},a)}else this.onerrorEvent=s,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(s=>{s(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function da(t){return class extends t.OverlayView{constructor(s){super(),Re(this,"element"),Re(this,"opts");const{element:a,...d}=s;this.element=a,this.opts=d,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof t.LatLng?this.opts.position:new t.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;const s=this.element;return s.style.display!=="none"&&s.style.visibility!=="hidden"&&(s.style.opacity===""||Number(s.style.opacity)>.01)}onAdd(){if(!this.element)return;const s=this.getPanes();s&&s.overlayMouseTarget.appendChild(this.element)}draw(){if(!this.element)return;const s=this.getProjection(),a=s==null?void 0:s.fromLatLngToDivPixel(this.getPosition());if(a){this.element.style.position="absolute";const d=this.element.offsetHeight,o=this.element.offsetWidth;let r,c;switch(this.opts.anchorPoint){case"TOP_CENTER":r=a.x-o/2,c=a.y;break;case"BOTTOM_CENTER":r=a.x-o/2,c=a.y-d;break;case"LEFT_CENTER":r=a.x,c=a.y-d/2;break;case"RIGHT_CENTER":r=a.x-o,c=a.y-d/2;break;case"TOP_LEFT":r=a.x,c=a.y;break;case"TOP_RIGHT":r=a.x-o,c=a.y;break;case"BOTTOM_LEFT":r=a.x,c=a.y-d;break;case"BOTTOM_RIGHT":r=a.x-o,c=a.y-d;break;default:r=a.x-o/2,c=a.y-d/2}this.element.style.left=r+"px",this.element.style.top=c+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}onRemove(){this.element&&this.element.remove()}setOptions(s){const{element:a,...d}=s;this.element=a,this.opts=d,this.draw()}}}let Ue;const Fe=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","heading_changed","idle","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","resize","rightclick","tilesloaded","tilt_changed","zoom_changed"],ua=et({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1}},emits:Fe,setup(t,{emit:s}){const a=$(),d=$(!1),o=$(),r=$(),c=$(!1);ee(st,o),ee(at,r),ee(ia,c);const x=()=>{const n={...t};Object.keys(n).forEach(m=>{n[m]===void 0&&delete n[m]});const w=m=>{var y;return m?{position:(y=r.value)==null?void 0:y.ControlPosition[m]}:{}},b={scaleControlOptions:t.scaleControlStyle?{style:t.scaleControlStyle}:{},panControlOptions:w(t.panControlPosition),zoomControlOptions:w(t.zoomControlPosition),rotateControlOptions:w(t.rotateControlPosition),streetViewControlOptions:w(t.streetViewControlPosition),fullscreenControlOptions:w(t.fullscreenControlPosition),disableDefaultUI:t.disableDefaultUi};return{...n,...b}},S=Y([r,o],([n,w])=>{const b=n,m=w;b&&m&&(b.event.addListenerOnce(m,"tilesloaded",()=>{c.value=!0}),setTimeout(S,0))},{immediate:!0}),M=()=>{try{const{apiKey:n,region:w,version:b,language:m,libraries:y}=t;Ue=new J({apiKey:n,region:w,version:b,language:m,libraries:y})}catch(n){console.error(n)}},f=n=>{r.value=X(n.maps),o.value=X(new n.maps.Map(a.value,x()));const w=da(r.value);r.value[re]=w,Fe.forEach(m=>{var y;(y=o.value)==null||y.addListener(m,v=>s(m,v))}),d.value=!0;const b=Object.keys(t).filter(m=>!["apiPromise","apiKey","version","libraries","region","language","center","zoom"].includes(m)).map(m=>tt(t,m));Y([()=>t.center,()=>t.zoom,...b],([m,y],[v,p])=>{var T,Z,E;const{center:k,zoom:h,...C}=x();(T=o.value)==null||T.setOptions(C),y!==void 0&&y!==p&&((Z=o.value)==null||Z.setZoom(y));const V=!v||m.lng!==v.lng||m.lat!==v.lat;m&&V&&((E=o.value)==null||E.panTo(m))})};return W(()=>{t.apiPromise&&t.apiPromise instanceof Promise?t.apiPromise.then(f):(M(),Ue.load().then(f))}),ie(()=>{var n;c.value=!1,o.value&&((n=r.value)==null||n.event.clearInstanceListeners(o.value))}),{mapRef:a,ready:d,map:o,api:r,mapTilesLoaded:c}}}),pa=(t,s)=>{const a=t.__vccOpts||t;for(const[d,o]of s)a[d]=o;return a},ha={ref:"mapRef",class:"mapdiv"};function ma(t,s,a,d,o,r){return l(),i("div",null,[e("div",ha,null,512),rt(t.$slots,"default",ct(dt({ready:t.ready,map:t.map,api:t.api,mapTilesLoaded:t.mapTilesLoaded})),void 0,!0)])}const va=pa(ua,[["render",ma],["__scopeId","data-v-174b771e"]]);function ga(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fa=function t(s,a){if(s===a)return!0;if(s&&a&&typeof s=="object"&&typeof a=="object"){if(s.constructor!==a.constructor)return!1;var d,o,r;if(Array.isArray(s)){if(d=s.length,d!=a.length)return!1;for(o=d;o--!==0;)if(!t(s[o],a[o]))return!1;return!0}if(s.constructor===RegExp)return s.source===a.source&&s.flags===a.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===a.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===a.toString();if(r=Object.keys(s),d=r.length,d!==Object.keys(a).length)return!1;for(o=d;o--!==0;)if(!Object.prototype.hasOwnProperty.call(a,r[o]))return!1;for(o=d;o--!==0;){var c=r[o];if(!t(s[c],a[c]))return!1}return!0}return s!==s&&a!==a};const wa=ga(fa),ya=t=>t==="Marker",xa=t=>t===re,ba=(t,s,a,d)=>{const o=$(),r=le(st,$()),c=le(at,$()),x=le(na,$()),S=se(()=>!!(x.value&&c.value&&(o.value instanceof c.value.Marker||o.value instanceof c.value[re])));return Y([r,a],(M,[f,n])=>{var w,b,m;const y=!wa(a.value,n)||r.value!==f;!r.value||!c.value||!y||(o.value?(o.value.setOptions(a.value),S.value&&((w=x.value)==null||w.removeMarker(o.value),(b=x.value)==null||b.addMarker(o.value))):(ya(t)?o.value=X(new c.value[t](a.value)):xa(t)?o.value=X(new c.value[t](a.value)):o.value=X(new c.value[t]({...a.value,map:r.value})),S.value?(m=x.value)==null||m.addMarker(o.value):o.value.setMap(r.value),s.forEach(v=>{var p;(p=o.value)==null||p.addListener(v,T=>d(v,T))})))},{immediate:!0}),ie(()=>{var M,f;o.value&&((M=c.value)==null||M.event.clearInstanceListeners(o.value),S.value?(f=x.value)==null||f.removeMarker(o.value):o.value.setMap(null))}),o},Ge=["animation_changed","click","dblclick","rightclick","dragstart","dragend","drag","mouseover","mousedown","mouseout","mouseup","draggable_changed","clickable_changed","contextmenu","cursor_changed","flat_changed","rightclick","zindex_changed","icon_changed","position_changed","shape_changed","title_changed","visible_changed"],ka=et({name:"Marker",props:{options:{type:Object,required:!0}},emits:Ge,setup(t,{emit:s,expose:a,slots:d}){const o=tt(t,"options"),r=ba("Marker",Ge,o,s);return ee(oa,r),a({marker:r}),()=>{var c;return(c=d.default)==null?void 0:c.call(d)}}});lt.concat(["bounds_changed"]);lt.concat(["center_changed","radius_changed"]);var ne;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(ne||(ne={}));Object.values(ne);const Ca={key:0,class:"max-w-[300px]"},$a={class:"normal-case whitespace-pre-wrap"},_a={key:0,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},Ma={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Sa={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Oa={key:2,src:"/images/icons/link.png",class:"h-4"},Ta={key:3,src:"/images/icons/reply.png",class:"h-4"},Va={key:1,class:"max-w-[300px]"},La={class:"normal-case whitespace-pre-wrap"},Na={class:"normal-case whitespace-pre-wrap"},Za={key:2,class:"max-w-[300px]"},Ea={class:"normal-case whitespace-pre-wrap"},Ba={key:3,class:"max-w-[300px]"},Ia={key:0},qa={class:"normal-case whitespace-pre-wrap"},ja={key:1,class:"normal-case whitespace-pre-wrap"},Pa={key:2,class:"normal-case whitespace-pre-wrap"},Ha={key:4},Aa=["src"],za={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},Da={key:2,class:"max-w-[300px]"},Ra={key:3,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},Ja={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Ua={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},Fa={key:2,src:"/images/icons/link.png",class:"h-4"},Ga={key:3,src:"/images/icons/reply.png",class:"h-4"},Ka={key:5},Xa={class:"relative w-[300px]"},Ya={class:"flex space-x-2 w-full h-1/3 bg-white opacity-90 pt-2"},Wa={key:0,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 1024 1024"},Qa={key:1,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 32 32"},e1={key:2,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 32 32"},t1={key:3,xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 32 32"},s1={class:"overflow-ellipsis overflow-hidden line-clamp-2 w-[200px]"},a1={class:"flex items-center text-slate-500 text-[11px]"},l1=["href","download"],o1={key:0,xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"},n1={key:1,xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"},i1={key:0,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},r1={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},c1={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},d1={key:2,src:"/images/icons/link.png",class:"h-4"},u1={key:3,src:"/images/icons/reply.png",class:"h-4"},p1={key:6},h1={key:7},m1=["src"],v1={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},g1={key:8},f1={class:"flex space-x-3 w-[300px] items-center"},w1={key:9},y1={key:0,controls:""},x1=["src"],b1={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},k1={key:10},C1={key:0,controls:"",width:"300",class:"max-h-[350px]"},$1=["src"],_1={key:1,class:"text-slate-500 flex justify-center items-center space-x-4"},M1={key:2,class:"max-w-[300px]"},S1={key:3,class:"mr-auto text-sm text-[#00a5f4] flex flex-col relative max-w-[25em]"},O1={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},T1={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},V1={key:2,src:"/images/icons/link.png",class:"h-4"},L1={key:3,src:"/images/icons/reply.png",class:"h-4"},N1={key:11,class:"mt-2 mb--2"},Z1={class:"text-gray-500 text-xs text-right leading-none"},E1={class:"text-gray-500 text-xs text-right leading-none"},B1={class:"absolute capitalize hidden group-hover:block bg-white text-gray-600 text-xs rounded-sm py-1 px-2 bottom-full mb-1 whitespace-no-wrap"},I1={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},q1={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 16 16"},j1={key:2,class:"text-red-600",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},P1={key:12,class:"cursor-pointer text-center border-t mt-2 pt-2"},H1={__name:"ChatBubble",props:{content:Object,type:String},setup(t){const s=t,a=$(!1),d=()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)},o=f=>({"text/plain":"TXT","application/pdf":"PDF","application/powerpoint":"PPT","application/vnd.ms-powerpoint":"PPT","application/msword":"DOC","application/vnd.ms-excel":"XLS","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"DOCX","application/vnd.openxmlformats-officedocument.presentationml.presentation":"PPTX","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"XLSX"})[f]||"Unknown",r=f=>{if(f===0)return"0 Bytes";const n=1024,w=["Bytes","KB","MB","GB","TB"],b=parseInt(Math.floor(Math.log(f)/Math.log(n)));return Math.round(f/Math.pow(n,b)*100)/100+" "+w[b]},c=f=>{const n=JSON.parse(f).contacts;if(n.length===1){const w=n[0];return w.name.formatted_name||`${w.name.first_name} ${w.name.last_name}`}else if(n.length>1){const w=n[0].name.first_name,b=n.length-1;return`${w} and ${b} other contacts`}else return"No contacts available"},x=f=>{const n=JSON.parse(f);return{lat:n.location.latitude,lng:n.location.longitude}},S=f=>{const w=se(()=>We().props.config).value.find(b=>b.key===f);return w?w.value:""},M=f=>{let n="sent";return f.forEach(w=>{const m=JSON.parse(w.metadata).status;if(m==="failed"){n="failed";return}else m==="read"?n="read":m==="delivered"&&n!=="read"&&(n="delivered")}),n};return(f,n)=>{var w,b,m,y,v,p,T,Z,E,k,h,C,V,A,O,_,L,ce,de,ue,pe,he,me,ve,ge,fe,we,ye,xe,be,ke,Ce,$e,_e,Me,Se,Oe,Te,Ve,Le,Ne,Ze,Ee,Be,Ie,qe,je,Pe,He,Ae,ze,De;return l(),i("div",{class:q(["rounded-lg my-1 p-2 text-sm flex flex-col relative",s.type==="outbound"?"ml-auto rounded-tr-none bg-[#d8fad4] speech-bubble-right":"mr-auto rounded-tl-none bg-white speech-bubble-left"])},[e("div",null,[JSON.parse(t.content.metadata).type==="text"?(l(),i("div",Ca,[e("p",$a,u(JSON.parse(t.content.metadata).text.body),1),(w=JSON.parse(t.content.metadata))!=null&&w.buttons?(l(),i("div",_a,[(l(!0),i(D,null,F((b=JSON.parse(t.content.metadata))==null?void 0:b.buttons,(B,R)=>(l(),i("div",{key:R,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[e("span",null,[B.type==="COPY_CODE"?(l(),i("svg",Ma,n[0]||(n[0]=[e("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1)]))):B.type==="PHONE_NUMBER"?(l(),i("svg",Sa,n[1]||(n[1]=[e("g",{fill:"none"},[e("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1)]))):B.type==="URL"?(l(),i("img",Oa)):(l(),i("img",Ta))]),e("span",null,u(B.text),1)]))),128))])):g("",!0)])):g("",!0),JSON.parse(t.content.metadata).type==="unsupported"?(l(),i("div",Va,[n[2]||(n[2]=e("span",{class:"text-red-500"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"})])],-1)),e("p",La,u(f.$t("Error code"))+" : "+u(JSON.parse(t.content.metadata).errors[0].code),1),e("p",Na,u(JSON.parse(t.content.metadata).errors[0].error_data.details),1)])):g("",!0),JSON.parse(t.content.metadata).type==="button"?(l(),i("div",Za,[e("p",Ea,u(JSON.parse(t.content.metadata).button.text),1)])):g("",!0),JSON.parse(t.content.metadata).type==="interactive"?(l(),i("div",Ba,[JSON.parse(t.content.metadata).interactive.type=="button_reply"?(l(),i("div",Ia,[e("p",qa,u((y=(m=JSON.parse(t.content.metadata).interactive)==null?void 0:m.button_reply)==null?void 0:y.title),1)])):g("",!0),JSON.parse(t.content.metadata).interactive.type=="list_reply"?(l(),i("p",ja,u((p=(v=JSON.parse(t.content.metadata).interactive)==null?void 0:v.list_reply)==null?void 0:p.title),1)):g("",!0),JSON.parse(t.content.metadata).interactive.type=="list_reply"?(l(),i("p",Pa,u((Z=(T=JSON.parse(t.content.metadata).interactive)==null?void 0:T.list_reply)==null?void 0:Z.description),1)):g("",!0)])):JSON.parse(t.content.metadata).type==="image"?(l(),i("div",Ha,[t.content.media!=null?(l(),i("img",{key:0,src:(k=(E=t.content)==null?void 0:E.media)==null?void 0:k.path,alt:"Image",class:"mb-2 max-w-[300px]"},null,8,Aa)):(l(),i("div",za,[n[3]||(n[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("g",{fill:"none"},[e("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),e("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1)),P(" "+u(f.$t("Content not available")),1)])),(h=JSON.parse(t.content.metadata).image)!=null&&h.caption?(l(),i("div",Da,u((C=JSON.parse(t.content.metadata).image)==null?void 0:C.caption),1)):g("",!0),(V=JSON.parse(t.content.metadata))!=null&&V.buttons?(l(),i("div",Ra,[(l(!0),i(D,null,F((A=JSON.parse(t.content.metadata))==null?void 0:A.buttons,(B,R)=>(l(),i("div",{key:R,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[e("span",null,[B.type==="COPY_CODE"?(l(),i("svg",Ja,n[4]||(n[4]=[e("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1)]))):B.type==="PHONE_NUMBER"?(l(),i("svg",Ua,n[5]||(n[5]=[e("g",{fill:"none"},[e("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1)]))):B.type==="URL"?(l(),i("img",Fa)):(l(),i("img",Ga))]),e("span",null,u(B.text),1)]))),128))])):g("",!0)])):JSON.parse(t.content.metadata).type==="document"?(l(),i("div",Ka,[e("div",Xa,[e("div",Ya,[e("div",null,[o((_=(O=t.content)==null?void 0:O.media)==null?void 0:_.type)==="PDF"?(l(),i("svg",Wa,n[6]||(n[6]=[e("path",{fill:"red",d:"m531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7c-3.8-21.3-19.5-29.6-32.9-30.2c-15.8-.7-29.9 8.3-33.4 21.4c-6.6 24-.7 56.8 10.1 98.6c-13.6 32.4-35.3 79.5-51.2 107.5c-29.6 15.3-69.3 38.9-75.2 68.7c-1.2 5.5.2 12.5 3.5 18.8c3.7 7 9.6 12.4 16.5 15c3 1.1 6.6 2 10.8 2c17.6 0 46.1-14.2 84.1-79.4c5.8-1.9 11.8-3.9 17.6-5.9c27.2-9.2 55.4-18.8 80.9-23.1c28.2 15.1 60.3 24.8 82.1 24.8c21.6 0 30.1-12.8 33.3-20.5c5.6-13.5 2.9-30.5-6.2-39.6c-13.2-13-45.3-16.4-95.3-10.2c-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7c6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4c-4.9-19.9-5.6-48.1-2.7-51.4c.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2c-21.6 4.9-41.3 13-58.9 20.2c-4.2 1.7-8.3 3.4-12.3 5c13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6c40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494z"},null,-1)]))):g("",!0),o((ce=(L=t.content)==null?void 0:L.media)==null?void 0:ce.type)==="XLSX"||o((ue=(de=t.content)==null?void 0:de.media)==null?void 0:ue.type)==="XLS"?(l(),i("svg",Qa,n[7]||(n[7]=[z('<defs><linearGradient id="vscodeIconsFileTypeExcel0" x1="4.494" x2="13.832" y1="-2092.086" y2="-2075.914" gradientTransform="translate(0 2100)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#18884f"></stop><stop offset=".5" stop-color="#117e43"></stop><stop offset="1" stop-color="#0b6631"></stop></linearGradient></defs><path fill="#185c37" d="M19.581 15.35L8.512 13.4v14.409A1.192 1.192 0 0 0 9.705 29h19.1A1.192 1.192 0 0 0 30 27.809V22.5Z"></path><path fill="#21a366" d="M19.581 3H9.705a1.192 1.192 0 0 0-1.193 1.191V9.5L19.581 16l5.861 1.95L30 16V9.5Z"></path><path fill="#107c41" d="M8.512 9.5h11.069V16H8.512Z"></path><path d="M16.434 8.2H8.512v16.25h7.922a1.2 1.2 0 0 0 1.194-1.191V9.391A1.2 1.2 0 0 0 16.434 8.2Z" opacity=".1"></path><path d="M15.783 8.85H8.512V25.1h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.783 8.85H8.512V23.8h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.132 8.85h-6.62V23.8h6.62a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path fill="url(#vscodeIconsFileTypeExcel0)" d="M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.192 1.192 0 0 1 2 21.959V10.041A1.192 1.192 0 0 1 3.194 8.85Z"></path><path fill="#fff" d="m5.7 19.873l2.511-3.884l-2.3-3.862h1.847L9.013 14.6c.116.234.2.408.238.524h.017c.082-.188.169-.369.26-.546l1.342-2.447h1.7l-2.359 3.84l2.419 3.905h-1.809l-1.45-2.711A2.355 2.355 0 0 1 9.2 16.8h-.024a1.688 1.688 0 0 1-.168.351l-1.493 2.722Z"></path><path fill="#33c481" d="M28.806 3h-9.225v6.5H30V4.191A1.192 1.192 0 0 0 28.806 3Z"></path><path fill="#107c41" d="M19.581 16H30v6.5H19.581Z"></path>',12)]))):g("",!0),o((he=(pe=t.content)==null?void 0:pe.media)==null?void 0:he.type)==="DOC"||o((ve=(me=t.content)==null?void 0:me.media)==null?void 0:ve.type)==="DOCX"?(l(),i("svg",e1,n[8]||(n[8]=[z('<defs><linearGradient id="vscodeIconsFileTypeWord0" x1="4.494" x2="13.832" y1="-1712.086" y2="-1695.914" gradientTransform="translate(0 1720)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#2368c4"></stop><stop offset=".5" stop-color="#1a5dbe"></stop><stop offset="1" stop-color="#1146ac"></stop></linearGradient></defs><path fill="#41a5ee" d="M28.806 3H9.705a1.192 1.192 0 0 0-1.193 1.191V9.5l11.069 3.25L30 9.5V4.191A1.192 1.192 0 0 0 28.806 3Z"></path><path fill="#2b7cd3" d="M30 9.5H8.512V16l11.069 1.95L30 16Z"></path><path fill="#185abd" d="M8.512 16v6.5l10.418 1.3L30 22.5V16Z"></path><path fill="#103f91" d="M9.705 29h19.1A1.192 1.192 0 0 0 30 27.809V22.5H8.512v5.309A1.192 1.192 0 0 0 9.705 29Z"></path><path d="M16.434 8.2H8.512v16.25h7.922a1.2 1.2 0 0 0 1.194-1.191V9.391A1.2 1.2 0 0 0 16.434 8.2Z" opacity=".1"></path><path d="M15.783 8.85H8.512V25.1h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.783 8.85H8.512V23.8h7.271a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path d="M15.132 8.85h-6.62V23.8h6.62a1.2 1.2 0 0 0 1.194-1.191V10.041a1.2 1.2 0 0 0-1.194-1.191Z" opacity=".2"></path><path fill="url(#vscodeIconsFileTypeWord0)" d="M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.192 1.192 0 0 1 2 21.959V10.041A1.192 1.192 0 0 1 3.194 8.85Z"></path><path fill="#fff" d="M6.9 17.988c.023.184.039.344.046.481h.028c.01-.13.032-.287.065-.47s.062-.338.089-.465l1.255-5.407h1.624l1.3 5.326a7.761 7.761 0 0 1 .162 1h.022a7.6 7.6 0 0 1 .135-.975l1.039-5.358h1.477l-1.824 7.748h-1.727l-1.237-5.126q-.054-.222-.122-.578t-.084-.52h-.021q-.021.189-.084.561c-.042.249-.075.432-.1.552L7.78 19.871H6.024L4.19 12.127h1.5l1.131 5.418a4.469 4.469 0 0 1 .079.443Z"></path>',11)]))):g("",!0),o((fe=(ge=t.content)==null?void 0:ge.media)==null?void 0:fe.type)==="PPT"||o((ye=(we=t.content)==null?void 0:we.media)==null?void 0:ye.type)==="PPTX"?(l(),i("svg",t1,n[9]||(n[9]=[z('<defs><linearGradient id="vscodeIconsFileTypePowerpoint0" x1="4.494" x2="13.832" y1="-1748.086" y2="-1731.914" gradientTransform="translate(0 1756)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ca4c28"></stop><stop offset=".5" stop-color="#c5401e"></stop><stop offset="1" stop-color="#b62f14"></stop></linearGradient></defs><path fill="#ed6c47" d="M18.93 17.3L16.977 3h-.146A12.9 12.9 0 0 0 3.953 15.854V16Z"></path><path fill="#ff8f6b" d="M17.123 3h-.146v13l6.511 2.6L30 16v-.146A12.9 12.9 0 0 0 17.123 3Z"></path><path fill="#d35230" d="M30 16v.143A12.905 12.905 0 0 1 17.12 29h-.287a12.907 12.907 0 0 1-12.88-12.857V16Z"></path><path d="M17.628 9.389V23.26a1.2 1.2 0 0 1-.742 1.1a1.16 1.16 0 0 1-.45.091H7.027a10.08 10.08 0 0 1-.521-.65a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85a8.82 8.82 0 0 1 .456-.65h9.93a1.2 1.2 0 0 1 1.192 1.189Z" opacity=".1"></path><path d="M16.977 10.04v13.871a1.15 1.15 0 0 1-.091.448a1.2 1.2 0 0 1-1.1.741H7.62q-.309-.314-.593-.65a10.08 10.08 0 0 1-.521-.65a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85h9.735a1.2 1.2 0 0 1 1.192 1.19Z" opacity=".2"></path><path d="M16.977 10.04v12.571a1.2 1.2 0 0 1-1.192 1.189H6.506a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85h9.735a1.2 1.2 0 0 1 1.192 1.19Z" opacity=".2"></path><path d="M16.326 10.04v12.571a1.2 1.2 0 0 1-1.192 1.189H6.506a12.735 12.735 0 0 1-2.553-7.657v-.286A12.705 12.705 0 0 1 6.05 8.85h9.084a1.2 1.2 0 0 1 1.192 1.19Z" opacity=".2"></path><path fill="url(#vscodeIconsFileTypePowerpoint0)" d="M3.194 8.85h11.938a1.193 1.193 0 0 1 1.194 1.191v11.918a1.193 1.193 0 0 1-1.194 1.191H3.194A1.192 1.192 0 0 1 2 21.959V10.041A1.192 1.192 0 0 1 3.194 8.85Z"></path><path fill="#fff" d="M9.293 12.028a3.287 3.287 0 0 1 2.174.636a2.27 2.27 0 0 1 .756 1.841a2.555 2.555 0 0 1-.373 1.376a2.49 2.49 0 0 1-1.059.935a3.607 3.607 0 0 1-1.591.334H7.687v2.8H6.141v-7.922ZM7.686 15.94h1.331a1.735 1.735 0 0 0 1.177-.351a1.3 1.3 0 0 0 .4-1.025q0-1.309-1.525-1.31H7.686v2.686Z"></path>',10)]))):g("",!0)]),e("div",null,[e("div",null,[e("p",s1,u((be=(xe=t.content)==null?void 0:xe.media)==null?void 0:be.name),1)]),e("div",a1,[e("span",null,u(o((Ce=(ke=t.content)==null?void 0:ke.media)==null?void 0:Ce.type)),1),n[10]||(n[10]=e("span",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24"},[e("circle",{cx:"12.1",cy:"12.1",r:"1",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})])],-1)),e("span",null,u(r((_e=($e=t.content)==null?void 0:$e.media)==null?void 0:_e.size)),1)])]),e("a",{href:(Se=(Me=t.content)==null?void 0:Me.media)==null?void 0:Se.path,download:(Te=(Oe=t.content)==null?void 0:Oe.media)==null?void 0:Te.name,target:"_blank",onClick:d,class:"flex justify-end w-full"},[a.value?(l(),i("svg",n1,n[12]||(n[12]=[z('<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="2 4" stroke-dashoffset="6" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21"><animate attributeName="stroke-dashoffset" dur="0.6s" repeatCount="indefinite" values="6;0"></animate></path><path stroke-dasharray="30" stroke-dashoffset="30" d="M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.1s" dur="0.3s" values="30;0"></animate></path><path stroke-dasharray="10" stroke-dashoffset="10" d="M12 8v7.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.2s" values="10;0"></animate></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 15.5l3.5 -3.5M12 15.5l-3.5 -3.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.7s" dur="0.2s" values="6;0"></animate></path></g>',1)]))):(l(),i("svg",o1,n[11]||(n[11]=[e("path",{fill:"currentColor",d:"M4.025 11.975q0 2.825 1.725 5t4.4 2.825q.375.1.6.425t.225.725q0 .4-.275.663t-.625.187q-3.5-.7-5.775-3.437t-2.275-6.388q0-3.65 2.288-6.387T10.1 2.15q.35-.075.625.188T11 3q0 .4-.225.725t-.6.425q-2.7.65-4.425 2.825t-1.725 5Zm8.95 1.15l1.85-1.85q.3-.3.725-.3t.725.3q.3.3.288.725t-.313.725L12.675 16.3q-.3.3-.7.3t-.7-.3L7.65 12.65q-.3-.3-.288-.713t.313-.712q.3-.3.713-.3t.712.3l1.875 1.9V8q0-.425.288-.713T11.975 7q.425 0 .713.288t.287.712v5.125Zm3.05 5.75q.375-.225.813-.2t.762.35q.3.3.25.713t-.4.637q-.8.5-1.675.863t-1.8.562q-.4.075-.7-.175t-.3-.675q0-.425.263-.75t.687-.45q.55-.15 1.075-.375t1.025-.5ZM13.975 4.2q-.425-.125-.7-.45T13 3q0-.425.288-.675t.687-.175q.95.2 1.838.562T17.5 3.6q.35.225.375.625t-.25.7q-.3.325-.738.35t-.812-.2q-.5-.275-1.025-.5T13.975 4.2Zm5.75 9.75q.125-.425.463-.7t.762-.275q.425 0 .688.325t.162.725q-.2.95-.575 1.812t-.9 1.663q-.225.35-.625.35t-.675-.275q-.3-.3-.337-.725t.187-.8q.275-.5.488-1.012t.362-1.088Zm-.85-6.075q-.225-.375-.188-.788t.338-.712q.275-.275.675-.263t.625.338q.55.8.925 1.688t.575 1.837q.075.4-.187.7t-.688.3q-.425 0-.762-.287t-.463-.713q-.15-.55-.363-1.075t-.487-1.025Z"},null,-1)])))],8,l1)])]),(Ve=JSON.parse(t.content.metadata))!=null&&Ve.buttons?(l(),i("div",i1,[(l(!0),i(D,null,F((Le=JSON.parse(t.content.metadata))==null?void 0:Le.buttons,(B,R)=>(l(),i("div",{key:R,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[e("span",null,[B.type==="COPY_CODE"?(l(),i("svg",r1,n[13]||(n[13]=[e("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1)]))):B.type==="PHONE_NUMBER"?(l(),i("svg",c1,n[14]||(n[14]=[e("g",{fill:"none"},[e("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1)]))):B.type==="URL"?(l(),i("img",d1)):(l(),i("img",u1))]),e("span",null,u(B.text),1)]))),128))])):g("",!0)])):JSON.parse(t.content.metadata).type==="location"?(l(),i("div",p1,[I(N(va),{"api-key":S("google_maps_api_key"),style:{width:"300px",height:"200px"},center:x(t.content.metadata),zoom:15},{default:j(()=>[I(N(ka),{options:{position:x(t.content.metadata)}},null,8,["options"])]),_:1},8,["api-key","center"])])):JSON.parse(t.content.metadata).type==="sticker"?(l(),i("div",h1,[t.content.media!=null?(l(),i("img",{key:0,src:(Ze=(Ne=t.content)==null?void 0:Ne.media)==null?void 0:Ze.path,alt:"Image",class:"mb-2 max-w-[100px]"},null,8,m1)):(l(),i("div",v1,[n[15]||(n[15]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("g",{fill:"none"},[e("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),e("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1)),P(" "+u(f.$t("Content not available")),1)]))])):JSON.parse(t.content.metadata).type==="contacts"?(l(),i("div",g1,[e("div",f1,[n[16]||(n[16]=e("div",{class:"rounded-full p-3 bg-slate-200"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 512 512"},[e("path",{fill:"currentColor",d:"M332.64 64.58C313.18 43.57 286 32 256 32c-30.16 0-57.43 11.5-76.8 32.38c-19.58 21.11-29.12 49.8-26.88 80.78C156.76 206.28 203.27 256 256 256s99.16-49.71 103.67-110.82c2.27-30.7-7.33-59.33-27.03-80.6ZM432 480H80a31 31 0 0 1-24.2-11.13c-6.5-7.77-9.12-18.38-7.18-29.11C57.06 392.94 83.4 353.61 124.8 326c36.78-24.51 83.37-38 131.2-38s94.42 13.5 131.2 38c41.4 27.6 67.74 66.93 76.18 113.75c1.94 10.73-.68 21.34-7.18 29.11A31 31 0 0 1 432 480Z"})])],-1)),e("div",null,u(c(t.content.metadata)),1)])])):JSON.parse(t.content.metadata).type==="audio"?(l(),i("div",w1,[t.content.media!=null?(l(),i("audio",y1,[e("source",{src:(Be=(Ee=t.content)==null?void 0:Ee.media)==null?void 0:Be.path},null,8,x1),P(" "+u(f.$t("Your browser does not support the audio element")),1)])):(l(),i("div",b1,[n[17]||(n[17]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("g",{fill:"none"},[e("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),e("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1)),P(" "+u(f.$t("Content not available")),1)]))])):JSON.parse(t.content.metadata).type==="video"?(l(),i("div",k1,[t.content.media!=null?(l(),i("video",C1,[e("source",{src:(qe=(Ie=t.content)==null?void 0:Ie.media)==null?void 0:qe.path,type:"video/mp4"},null,8,$1),P(" "+u(f.$t("Your browser does not support the video element")),1)])):(l(),i("div",_1,[n[18]||(n[18]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[e("g",{fill:"none"},[e("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),e("path",{fill:"currentColor",d:"m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0ZM12 4.898L4.232 18.352h15.536L12 4.898ZM12 15a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0-7a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1Z"})])],-1)),P(" "+u(f.$t("Content not available")),1)])),(je=JSON.parse(t.content.metadata).video)!=null&&je.caption?(l(),i("div",M1,u((Pe=JSON.parse(t.content.metadata).video)==null?void 0:Pe.caption),1)):g("",!0),(He=JSON.parse(t.content.metadata))!=null&&He.buttons?(l(),i("div",S1,[(l(!0),i(D,null,F((Ae=JSON.parse(t.content.metadata))==null?void 0:Ae.buttons,(B,R)=>(l(),i("div",{key:R,class:"flex justify-center items-center space-x-2 rounded-lg bg-white h-10 my-[0.1em]"},[e("span",null,[B.type==="COPY_CODE"?(l(),i("svg",O1,n[19]||(n[19]=[e("path",{fill:"currentColor",d:"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z"},null,-1)]))):B.type==="PHONE_NUMBER"?(l(),i("svg",T1,n[20]||(n[20]=[e("g",{fill:"none"},[e("path",{fill:"currentColor",d:"M20 16v4c-2.758 0-5.07-.495-7-1.325c-3.841-1.652-6.176-4.63-7.5-7.675C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3c1.324 3.045 3.659 6.023 7.5 7.675L16 15l4 1z"}),e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 18.675c1.93.83 4.242 1.325 7 1.325v-4l-4-1l-3 3.675zm0 0C9.159 17.023 6.824 14.045 5.5 11m0 0C4.4 8.472 4 5.898 4 4h4l1 4l-3.5 3z"})],-1)]))):B.type==="URL"?(l(),i("img",V1)):(l(),i("img",L1))]),e("span",null,u(B.text),1)]))),128))])):g("",!0)])):g("",!0),s.type==="outbound"&&t.content.user?(l(),i("div",N1,[e("span",Z1,[n[21]||(n[21]=P("Sent By: ")),e("u",null,u(((ze=t.content.user)==null?void 0:ze.first_name)+" "+((De=t.content.user)==null?void 0:De.last_name)),1)])])):g("",!0),e("div",{class:q(["flex items-center justify-between space-x-4",s.type==="outbound"&&t.content.user?"":"mt-2"])},[e("p",E1,u(t.content.created_at),1),e("span",{class:q(["relative group cursor-pointer",M(t.content.logs)==="read"?"text-blue-500":"text-gray-500"])},[e("div",B1,u(M(t.content.logs)),1),M(t.content.logs)==="sent"?(l(),i("svg",I1,n[22]||(n[22]=[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m2.75 8.75l3.5 3.5l7-7.5"},null,-1)]))):g("",!0),M(t.content.logs)==="delivered"||M(t.content.logs)==="read"?(l(),i("svg",q1,n[23]||(n[23]=[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m1.75 9.75l2.5 2.5m3.5-4l2.5-2.5m-4.5 4l2.5 2.5l6-6.5"},null,-1)]))):g("",!0),M(t.content.logs)==="failed"?(l(),i("svg",j1,n[24]||(n[24]=[e("g",{fill:"currentColor"},[e("path",{d:"M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2zm3.708 6.208L1 11.105V5.383zM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2z"}),e("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7a3.5 3.5 0 0 0 0 7m.5-5v1.5a.5.5 0 0 1-1 0V11a.5.5 0 0 1 1 0m0 3a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0"})],-1)]))):g("",!0)],2)],2),JSON.parse(t.content.metadata).type==="contacts"?(l(),i("div",P1,u(f.$t("View")),1)):g("",!0)])],2)}}},A1={key:0,class:"py-4 md:py-4 relative px-6 md:px-10"},z1={key:1,class:"py-2"},D1={class:"text-center font-light text-sm border-b border-t py-2 border-dashed border-black"},R1={class:"text-xs"},J1={key:2,class:"py-2 bg-orange-100 my-2 rounded-lg p-2 w-[fit-content] ml-auto"},U1={class:"text-right font-light text-sm"},F1={class:"flex items-center justify-between mt-2 space-x-4"},G1={class:"text-gray-500 text-xs text-right leading-none"},K1={__name:"ChatThread",props:{rows:{type:Object,required:!0}},setup(t){return(s,a)=>t.rows.length>0?(l(),i("div",A1,[(l(!0),i(D,null,F(t.rows,(d,o)=>(l(),i("div",{class:q(["flex flex-grow flex-col",d[0].type==="ticket"?"justify-center":"justify-end"])},[d[0].type==="chat"?(l(),H(H1,{key:o,content:d[0].value,type:d[0].value.type},null,8,["content","type"])):g("",!0),d[0].type==="ticket"?(l(),i("div",z1,[e("div",D1,[e("div",null,u(d[0].value.description),1),e("div",R1,u(d[0].value.created_at),1)])])):g("",!0),d[0].type==="notes"?(l(),i("div",J1,[e("div",U1,[e("div",null,u(d[0].value.content),1),e("div",F1,[e("p",G1,u(d[0].value.created_at),1)])])])):g("",!0)],2))),256))])):g("",!0)}},X1={class:"md:flex md:flex-grow md:overflow-hidden"},Y1={key:2,class:"w-full py-4"},W1={key:3,class:"flex-1 overflow-y-hidden"},Q1=["onClick"],Bl={__name:"Index",props:["rows","rowCount","pusherSettings","organizationId","isChatLimitReached","toggleNavBar","state","demoNumber","settings","status","chatThread","addon","contact","ticket","chat_sort_direction","filters","templates","fields","locationSettings"],setup(t){var k,h;const s=t,a=$(s.rows);$(s.rowCount),$(null);const d=$(null),o=$(!1),r=$(!1),c=$(!1),x=$(!1),S=$(s.isChatLimitReached),M=$(null);$(!1);const f=$(s.settings.metadata),n=$(f.value?JSON.parse(f.value):null),w=$(((h=(k=n.value)==null?void 0:k.tickets)==null?void 0:h.active)??!1),b=$(s.chatThread),m=$(s.contact);Y(()=>s.rows,C=>{a.value=C});function y(C){r.value=C}const v=()=>{const C=d.value;C&&C.scrollTo({top:C.scrollHeight,behavior:"smooth"})},p=()=>{M.value.click(),m.value=null},T=()=>{b.value=[],oe.delete("/chats/"+m.value.uuid)},Z=C=>{const V=C[0].value.wam_id;!b.value.some(O=>O[0].value.wam_id===V)&&C[0].value.deleted_at==null&&(b.value.push(C),setTimeout(v,100))},E=async C=>{m.value&&m.value.id==C[0].value.contact_id&&Z(C);const V=await oe.get("/chats");V&&(a.value=V.data.result)};return W(()=>{ot(s.pusherSettings.pusher_app_key,s.pusherSettings.pusher_app_cluster).channel("chats.ch"+s.organizationId).listen("NewChatEvent",V=>{E(V.chat)}),v()}),(C,V)=>(l(),H(nt,null,{default:j(A=>[e("div",X1,[e("div",{class:q(["md:w-[30%] md:flex flex-col h-full bg-white border-r border-l",m.value?"hidden":""])},[I(sa,{rows:a.value,filters:s.filters,rowCount:s.rowCount,ticketingIsEnabled:w.value,status:s==null?void 0:s.status,chatSortDirection:s.chat_sort_direction},null,8,["rows","filters","rowCount","ticketingIsEnabled","status","chatSortDirection"])],2),e("div",{class:q(["min-w-0 bg-cover flex flex-col chat-bg",m.value?"h-screen md:w-[70%]":"md:h-screen md:w-[70%]"])},[m.value?(l(),H(Qt,{key:0,ticketingIsEnabled:w.value,contact:m.value,displayContactInfo:r.value,ticket:t.ticket,addon:t.addon,onToggleView:y,onDeleteThread:T,onCloseThread:p},null,8,["ticketingIsEnabled","contact","displayContactInfo","ticket","addon"])):g("",!0),m.value&&!c.value?(l(),i("div",{key:1,class:"flex-1 overflow-y-auto",ref_key:"scrollContainer2",ref:d},[!r.value&&!o.value&&!c.value?(l(),H(K1,{key:0,rows:b.value},null,8,["rows"])):g("",!0),r.value&&!c.value?(l(),H(kt,{key:1,class:"bg-white h-full",fields:s.fields,contact:m.value,locationSettings:s.locationSettings},null,8,["fields","contact","locationSettings"])):g("",!0)],512)):g("",!0),m.value&&!r.value&&!x.value&&!c.value?(l(),i("div",Y1,[I(qt,{contact:m.value,chatLimitReached:S.value,onViewTemplate:V[0]||(V[0]=O=>{c.value=!0})},null,8,["contact","chatLimitReached"])])):g("",!0),c.value?(l(),i("div",W1,[c.value?(l(),H(ut,{key:0,class:"bg-white h-full",contact:m.value.uuid,templates:t.templates,contactGroups:[],settings:s.settings,displayCancelBtn:!1,displayTitle:!0,isCampaignFlow:!1,scheduleTemplate:!1,sendText:"Send Message",onViewTemplate:V[1]||(V[1]=O=>{c.value=!1})},null,8,["contact","templates","settings"])):g("",!0)])):g("",!0)],2)]),e("button",{class:"hidden",ref_key:"toggleNavbarBtn",ref:M,onClick:A.toggleNavBar},null,8,Q1)]),_:1}))}};export{Bl as default};
