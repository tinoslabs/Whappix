import{m as _,r as d,T as h,f as L,g as b,o as n,a as t,t as o,u as l,c as i,h as T,F as D,e as F,j as x,k as f,n as k,K as C}from"./app-63c352f8.js";import Y from"./App-eb72ec5a.js";import{_ as $}from"./Modal-77090c91.js";import{P as W}from"./Pagination-83ad7c1b.js";import"./App-ab3770eb.js";import"./Sidebar-7ba13270.js";import"./Menu-a985a654.js";import"./ProfileModal-7fdd08ae.js";import"./FormInput-a9577592.js";import"./FormPhoneInput-ba9f060e.js";/* empty css                      */import"./FormSelect-51609345.js";import"./index-245abe8c.js";import"./hidden-1ba5fb48.js";import"./use-text-value-34fc6a1a.js";import"./transition-513441a0.js";import"./micro-task-89dcd6af.js";import"./tabs-14de339e.js";import"./LangToggle-130b0b55.js";import"./MobileSidebar-b0e564de.js";import"./index-445d2961.js";/* empty css              */import"./Sidebar-960147ab.js";import"./_plugin-vue_export-helper-c27b6911.js";const q={class:"text-xl mb-6"},K={class:"bg-white border px-2 py-2 rounded-md mb-8"},P={class:"text-sm mb-2"},R={class:"text-sm"},z={class:"text-sm flex items-center gap-x-4 mb-2"},E=["disabled"],I={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},J={key:1},G={key:0,class:"mb-8"},H={class:"flex items-center text-sm"},Q={class:"ml-1 mt-1"},X={key:1},tt={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2 mb-6"},et={class:"flex items-center gap-x-2"},st={key:2,class:"flex items-center text-sm mb-4"},ot={class:"ml-1 mt-1"},nt={key:3,class:"grid grid-cols-2 gap-x-4 gap-y-1"},it={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2"},rt={class:"flex items-center gap-x-2"},lt=["src","alt"],at=["onClick"],dt={key:1,class:"border rounded-md px-4 py-1 bg-red-700 text-white flex items-center"},pt={class:"ml-1"},ut={class:"grid grid-cols-1 gap-x-6 gap-y-4"},mt={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},ct={class:"flex items-center gap-x-3"},vt=["src"],ft={class:"text-[16px]"},gt={class:"text-[17px] text-gray-800 mb-2"},ht={class:"text-sm"},bt={class:"mt-3 border-t pt-5 flex"},xt=["disabled"],wt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},yt={key:1},_t={class:"grid grid-cols-1 gap-x-6 gap-y-4"},kt={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},Ct={class:"flex items-center gap-x-3"},$t={class:"text-[16px]"},At={class:"text-sm"},Zt={class:"mt-3 border-t pt-5 flex"},Mt=["disabled"],St={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Bt={key:1},se={__name:"Updates",props:{config:{type:Object,required:!0},rows:{type:Array,required:!0}},setup(u){const A=u,Z=_(()=>C().props.applicationVersion),M=_(()=>C().props.applicationReleaseDate),w=d(null),y=d(null),S=d(null),B=d(!1),m=d(!1),c=d(!1),p=s=>{const e=A.config.find(r=>r.key===s);return e?e.value:""},a=h({uuid:null,purchase_code:null,addon:null,name:null}),v=h({update:!0}),g=h({checkUpdate:!0}),V=()=>{m.value=!0},j=s=>{w.value=s.logo,y.value=s.name,S.value=s.description;const e=s.metadata?JSON.parse(s.metadata):null;a.uuid=s.uuid,a.name=s.name,a.addon=(e==null?void 0:e.name)||s.name,c.value=!0},U=()=>{a.post("/admin/addons/update",{preserveScroll:!0,onSuccess:()=>{c.value=!1}})},N=()=>{v.post("/admin/update",{preserveScroll:!0,onSuccess:()=>{m.value=!1}})},O=()=>{g.get("/admin/updates/check",{preserveScroll:!0,onSuccess:()=>{B.value=!1}})};return(s,e)=>(n(),L(Y,null,{default:b(()=>[t("div",null,[t("h2",q,o(s.$t("Swiftchats Updates")),1),t("div",K,[t("div",P,"Current Version: v"+o(Z.value),1),t("div",R,"Released Date: "+o(M.value),1)]),t("div",z,[t("span",null,"Last checked on "+o(p("last_update_check")),1),t("button",{onClick:e[0]||(e[0]=r=>O()),disabled:l(g).processing,class:"border px-2 py-1 text-sm rounded-md bg-primary text-white"},[l(g).processing?(n(),i("svg",I,e[6]||(e[6]=[t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)]))):(n(),i("span",J,"Check Again"))],8,E)]),p("is_update_available")==0?(n(),i("div",G,[t("p",H,[e[7]||(e[7]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),t("span",Q,o(s.$t("You have installed the latest version of Swiftchats")),1)])])):(n(),i("div",X,[e[9]||(e[9]=t("div",{class:"flex items-center gap-x-1 text-sm bg-orange-100 py-3 px-2 rounded-md mb-4"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})]),t("span",null,[t("b",null,"Important:"),T(" Before updating backup your database and files")])],-1)),t("div",tt,[t("div",et,[e[8]||(e[8]=t("img",{class:"h-5 w-full",src:"/images/logo.png",alt:"Swiftchats Logo"},null,-1)),t("span",null,"v"+o(p("available_version")),1)]),t("button",{onClick:e[1]||(e[1]=r=>V()),class:"border rounded-md px-4 py-1"},o(s.$t("Update to version")+" "+p("available_version")),1)])])),e[12]||(e[12]=t("h2",{class:"text-xl mb-2"},"Addons",-1)),u.rows.data.length==0?(n(),i("p",st,[e[10]||(e[10]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),t("span",ot,o(s.$t("Your addons are all upto date.")),1)])):(n(),i("div",nt,[(n(!0),i(D,null,F(u.rows.data,r=>(n(),i("div",it,[t("div",rt,[t("img",{class:"h-8 w-8",src:"/images/"+r.logo,alt:r.name},null,8,lt),t("span",null,o(r.name),1)]),p("is_update_available")==0?(n(),i("button",{key:0,onClick:Vt=>j(r),class:"border rounded-md px-4 py-1"},"Update",8,at)):(n(),i("div",dt,[e[11]||(e[11]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),t("span",pt,o(s.$t("Update script first")),1)]))]))),256))])),x(W,{class:"mt-3",pagination:u.rows.meta},null,8,["pagination"])]),x($,{isOpen:c.value},{default:b(()=>[t("div",ut,[t("div",mt,[t("div",ct,[t("div",null,[t("img",{class:"h-8 w-8",src:"/images/"+w.value,alt:"Whatsapp Logo"},null,8,vt)]),t("div",ft,o(s.$t(y.value)),1)])]),t("form",{onSubmit:e[3]||(e[3]=f(r=>U(),["prevent"]))},[t("div",null,[t("div",gt,o(s.$t("Update module")),1),t("h4",ht,o(s.$t("A new version is available. Would you like to proceed with updating the module?")),1)]),t("div",bt,[t("button",{type:"button",onClick:e[2]||(e[2]=f(r=>c.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},o(s.$t("No, not now")),1),t("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":l(a).processing}]),disabled:l(a).processing},[l(a).processing?(n(),i("svg",wt,e[13]||(e[13]=[t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)]))):(n(),i("span",yt,o(s.$t("Yes, run the update")),1))],10,xt)])],32)])]),_:1},8,["isOpen"]),x($,{isOpen:m.value},{default:b(()=>[t("div",_t,[t("div",kt,[t("div",Ct,[t("div",$t,o(s.$t("Update to the latest version")),1)])]),t("form",{onSubmit:e[5]||(e[5]=f(r=>N(),["prevent"]))},[t("div",null,[t("h4",At,o(s.$t("Would you like to proceed with updating Swiftchats?")),1)]),t("div",Zt,[t("button",{type:"button",onClick:e[4]||(e[4]=f(r=>m.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},o(s.$t("No, not now")),1),t("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":l(v).processing}]),disabled:l(v).processing},[l(v).processing?(n(),i("svg",St,e[14]||(e[14]=[t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)]))):(n(),i("span",Bt,o(s.$t("Yes, run the update")),1))],10,Mt)])],32)])]),_:1},8,["isOpen"])]),_:1}))}};export{se as default};
